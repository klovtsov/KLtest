!define MaxReleaseDuration {10080}
!define accMaxReleaseDuration {15}

!include -c  <PowerShellNetApiScenarios.ScenarioLibrary

!|script                                                                                                                                                                                                                                                                            |
|Add system             |${SystemName}                                                                                       |with address |${SystemAddress}                             |platform    |Linux        |additional parameters|-MaxReleaseDuration ${MaxReleaseDuration}|
|Add account            |${ManagedAccount}                                                                                   |on system    |${SystemName}                                |with options|-MaxReleaseDuration ${accMaxReleaseDuration}                                 |
|List Accounts by filter|-systemName ${SystemName} -AccountName ${ManagedAccount} -propsToList accountname,MaxReleaseDuration|contains     |${ManagedAccount}.*${accMaxReleaseDuration}                                                                                             |
|List Systems by        |-systemName ${SystemName}                                                                           |output params|SystemName,MaxReleaseDuration                |contain     |${SystemName}.*${MaxReleaseDuration}                                         |
|Set Permissions        |"PPM Requestor"                                                                                     |on  account  |${ManagedAccount}                            |for user    |${API_user_1}                                                                |
|Try to Request Pwd by  |${API_user_1}                                                                                       |with result  |Release Duration .* exceeds Account Maximum                                                                                             |
|Try to Update Account  |${ManagedAccount}                                                                                   |             |-MaxReleaseDuration ${accMaxReleaseDuration}0|by user     |${API_user_1}|with result          |successful                               |
|Request Pwd by         |${API_user_1}                                                                                                                                                                                                                                              |
|Cancel Request by      |${API_user_1}                                                                                                                                                                                                                                              |
|Delete System          |${SystemName}                                                                                                                                                                                                                                              |
