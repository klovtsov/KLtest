!|scenario            |Set Connection Tab                                 |
|waitForElementPresent|id=Connection         |                            |
|click                |id=Connection         |                            |
|type;                |id=PARFuncAcct        |${ParFunctAcct}             |
|type;                |id=EGPFuncAcct        |${PsmFunctAcct}             |
|type;                |id=Timeout            |${SystemTimeout}            |
|type;                |id=DomainName         |${DomainName}               |
|type;                |id=NetBiosName        |${NETBIOSDomainName}        |
|click                |id=bt_Save            |                            |
|waitForResult        |System changes for ${SystemName} saved successfully|


!|scenario    |Set password                   |one                   |                  |switch                  |
|accountAction|${SystemPlatform};;corrupt;;${SystemAddress};;${FunctAcct};;${FunctAcctPwd};;${PathtoKey};;@switch|

!|scenario            |Add account                                 |accountName|with password|accPwd|
|clickOnLink          |link=Add Account                            |                                |
|type;                |id=SystemNm                                 |${SystemName}                   |
|click                |id=System                                   |                                |
|waitForElementPresent|xpath=//td[contains(text(),'${SystemName}')]|                                |
|click                |xpath=//td[contains(text(),'${SystemName}')]|                                |
|click                |id=Details                                  |                                |
|type;                |id=AccountName                              |@accountName                    |
|type;                |id=sPswd                                    |@accPwd                         |
|type;                |id=sConfPswd                                |@accPwd                         |
|click                |id=SubmitChangesButton                      |                                |
|waitForResult        |Changes saved successfully for @accountName                                  |
|Set description      |${ManagedAccountDescription}                |                                |

!| scenario    |Managed System                           |
|Create Account on System                                |
|Open          |${TPAMURL}  ||${TPAMAdmin}||${DefaultPwd}|
|Add system                                              |
|Set Connection Tab                                      |
|Test System   |${TestSystemSuccessful}                  |
|Set password  |${FunctAcct}||${FunctAcctWrongPwd}       |
|Test System   |${TestSystemFailed}                      |
|Choose Account|${ParFunctAcct}                          |
|Check Password|${CheckPasswordFailed}                   |


!| scenario                       |Managed Account                                                                                                                             |
|Add PPM account                  |${ManagedAccount}|with password|${ManagedAccountPwd}   |and profiles|${PpmCheckProfile}                ||${PpmChangeProfile}                |
|Reset Password                   |${ResetPasswordFailed}                                                                                                                      |
|Check Password                   |${CheckPasswordFailed}                                                                                                                      |
|Remove account                   |${ManagedAccount}                                                                                                                           |
|Add PPM account                  |${ManagedAccount}|with password|${ManagedAccountPwd}   |and profiles|${PersistentPasswordCheckProfile1}||${PpmChangeProfile}                |
|Forced Reset                     |Failed                                                                                                                                      |
|Remove account                   |${ManagedAccount}                                                                                                                           |
|Add PPM account                  |${ManagedAccount}|with password|${ManagedAccountPwd}   |and profiles|${PpmCheckProfile}                ||${PersistentPasswordChangeProfile1}|
|Schedule Check Password          |Failed                                                                                                                                      |
|Remove account                   |${ManagedAccount}                                                                                                                           |
|Change Account Password on System|${ManagedAccountPwdNew}                                                                                                                     |
|pause                            |30000                                                                                                                                       |
|Set password                     |${FunctAcct}     |             |${FunctAcctPwd}                                                                                             |
|pause                            |${RestoreFunctAcctPasswordTimeout}                                                                                                          |
|Add PPM account                  |${ManagedAccount}|with password|${ManagedAccountPwd}   |and profiles|${PpmCheckProfile}                ||${PersistentPasswordChangeProfile1}|
|Schedule Check Password          |Failed                                                                                                                                      |
|pause                            |${PpmScheduleTimeWindow}                                                                                                                    |
|Check Status                     |Success          |for reason   |Mismatch                                                                                                    |
|Remove account                   |${ManagedAccount}                                                                                                                           |
|Add PPM account                  |${ManagedAccount}|with password|${ManagedAccountPwd}   |and profiles|${PersistentPasswordCheckProfile1}||${PpmChangeProfile}                |
|Reset Password                   |${ResetPasswordSuccessful}                                                                                                                  |
|Check Password                   |${CheckPasswordSuccessful}                                                                                                                  |
|Remove account                   |${ManagedAccount}                                                                                                                           |
|Add PPM account                  |${ManagedAccount}|with password|${ManagedAccountPwd}   |and profiles|${PersistentPasswordCheckProfile1}||${PpmChangeProfile}                |
|Forced Reset                     |Success                                                                                                                                     |
|Remove account                   |${ManagedAccount}                                                                                                                           |
|Change Account Password on System|${ManagedAccountPwdNew}                                                                                                                     |
|Add PPM account                  |${ManagedAccount}|with password|${ManagedAccountPwdNew}|and profiles|${PpmCheckProfile}                ||${PersistentPasswordChangeProfile1}|
|Schedule Check Password          |Success                                                                                                                                     |
