!define wrongPwdRuleName {nonRule}
!define nonExisingMessage {Invalid password rule}
!include -c  <PowerShellNetApiScenarios.ScenarioLibrary

!|script                                                                                                                                                                                 |
|Add System                                                                                                                                                                              |
|Add account            |${ManagedAccount}                                                                             |on system|${SystemName}|with options|-PasswordRule ${PersistentPwdRuleName}|
|List Accounts by filter|-systemName ${SystemName} -AccountName ${ManagedAccount} -propsToList accountname,PasswordRule|contains |${ManagedAccount}.*${PersistentPwdRuleName}                     |

!3 Wrong rule
!|script|
|Try to Add account|${ManagedAccount}2|on system|${SystemName}|with options|-PasswordRule ${wrongPwdRuleName}|with result|${nonExisingMessage}|
|Delete System     |${SystemName}                                                                                                              |
