!|scenario        |Check results                                                                          |
|$res=            |CLI|${CLIBatch} ListAccounts --accountname ${ManagedAccount} --systemname ${SystemName}|
|Verify_Contain_OR|$res;;No Accounts to list                                                              |

!|scenario                    |Create Account Discovery Profile                                                                                                                              |
|clickOnLink                  |link=Profile Management                                                                                                                                       |
|select;                      |id=ProfileType|label=Account Discovery                                                                                                                        |
|waitForElementPresent        |id=NewButton  |                                                                                                                                               |
|click                        |id=NewButton                                                                                                                                                  |
|type;                        |id=ProfileName|${ProfileName}                                                                                                                                 |
|type;                        |id=Description|Description                                                                                                                                    |
|Set Delete Account properties|Do Nothing    ||${DeleteAccountDiscoveryEmail1},:System:,:Functional:                                                                                         |
|Add Detail                   |0             ||Do Nothing||${TemplateName}/${AutoDiscoveryAccount1}||${NewAccountDiscoveryEmail1},:System:,:Functional:||||||${AutoDiscoveryAccount1}|||||||||
|click                        |id=SaveButton                                                                                                                                                 |
|waitForTextPresent           |The profile saved successfully                                                                                                                                |

!|scenario        |Delete Account Action                                                                                               |
|Add account      |${AutoDiscoveryAccount2}|with password|${AutoDiscoveryAccountPassword1}                                             |
|Run AccDiscovery                                                                                                                      |
|Choose Account   |${AutoDiscoveryAccount2}                                                                                            |
|click            |id=Details                                                                                                          |
|$res=            |isChecked               |id=pwdMgmtNone                                                                             |
|Verify_Contain_OR|$res;;false                                                                                                         |
|pause            |120000                                                                                                              |
|Check No Mail    |${MailServer}           |             |${DeleteAccountDiscoveryEmail1}||password||${FromMail}||${AADDAN}||${AADDANb}|
|Check No Mail    |${MailServer}           |             |${SystemEMail}                 ||password||${FromMail}||${AADDAN}||${AADDANb}|
|Check No Mail    |${MailServer}           |             |${FuncAccEMail}                ||password||${FromMail}||${AADDAN}||${AADDANb}|

!|scenario                         |New Account Action                                                                                  |
|Remove account                    |${AutoDiscoveryAccount1}                                                                            |
|Set AccDiscovery profile to System|${ProfileName}          ||${SystemName}                                                             |
|Run AccDiscovery                                                                                                                       |
|Check results                     |${AutoDiscoveryAccount1}||${SystemName}                                                             |
|pause                             |180000                                                                                              |
|Check No Mail                     |${MailServer}           ||${NewAccountDiscoveryEmail1}||password||${FromMail}||${AADNAN}||${AADNANb}|
|Check No Mail                     |${MailServer}           ||${SystemEMail}              ||password||${FromMail}||${AADNAN}||${AADNANb}|
|Check No Mail                     |${MailServer}           ||${FuncAccEMail}             ||password||${FromMail}||${AADNAN}||${AADNANb}|


#!|scenario            |Check Account       |accountName||SystemName|
#|click                |link=Manage Accounts|                       |
#|pause                |45000                                       |
#|waitForElementPresent|id=SystemNm         |                       |
#|type;                |id=SystemNm         |@SystemName            |
#|click                |id=Listing          |                       |
#|waitForTextPresent   |System Name                                 |
#|verifyTextNotPresent |@accountName        | |                      |
#|assertTextNotPresent | |                   |@accountName           |


!|scenario                         |Delete Environment                                  |
|Delete Mails                                                                           |
|Delete Mailbox                    |${NewAccountDiscoveryEmail1}                        |
|Delete Mailbox                    |${DeleteAccountDiscoveryEmail1}                     |
|Delete Mailbox                    |${SystemEMail}                                      |
|Delete Mailbox                    |${FuncAccEMail}                                     |
|Set AccDiscovery profile to System|No Account Discovery Profile selected||${SystemName}|
|Remove system                     |${SystemName}                                       |
|Delete Account Discovery Profile  |${ProfileName}                                      |
|Remove system                     |${TemplateName}                                     |
|Delete Account on System          |${ManagedAccount1}                                  |


#|waitForElementPresent|//table[@id='AccountListing']//td[text()='@accountName']|             |
#|verifyText           |//table[@id='AccountListing']//td[text()='@accountName']||@accountName|



!|scenario|Add Detail                  |Index||NewAccountAction||TemplateAccount||EmailAddresses||UID||SID||Name||Group||Role||Task||Service|
|click    |id=btnAddRow                                                                                                                     |
|select;  |className=autoNewAction     |label=@NewAccountAction                                                                             |
|select;  |className=autoAcctTemplate  |label=@TemplateAccount                                                                              |
|type;    |className=autoEmailAddresses|@EmailAddresses                                                                                     |
|type;    |className=autoSIDFilter     |@SID                                                                                                |
|type;    |className=autoNameFilter    |@Name                                                                                               |
|type;    |className=autoGroupFilter   |@Group                                                                                              |

