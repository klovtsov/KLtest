!* Test description
Account review settings propagation.
*!
!define ManagedAccount {reqrev}
!define defreqrevValue {-12345}
!define specreqrevValue {2}
!define reviwerUser {${API_user_2}}
!define reviwerGrp {Global Reviewer Group}
!define escalationEmail {brin@gmail.com}
!include -c <AutomatedTesting.PowerShellNetApiScenarios.ScenarioLibrary

!|script                                                                                                                                                                                                                                                                                                                                                                                          |
|Add Member             |${reviwerUser}                                                                                                                               |to group       |"Global PPM Reviewer Group"                                                                                                                                                                                |
|Add account            |${ManagedAccount}                                                                                                                            |on system      |${TemplateName}                    |with options|-description "${accDescription}" -ReviewCount 1 -ReviewerType User -ReviewerName ${reviwerUser}                                                           |
|Add account            |${ManagedAccount}2                                                                                                                           |on system      |${TemplateName}                    |with options|-description "${accDescription}" -ReviewCount ${specreqrevValue} -ReviewerType Any -EscalationTime ${specreqrevValue} -escalationEmail  ${escalationEmail}|
|Add account            |${ManagedAccount}Grp                                                                                                                         |on system      |${TemplateName}                    |with options|-description "${accDescription}" -ReviewCount ${specreqrevValue} -ReviewerType Group -ReviewerName "${reviwerGrp}"                                        |
|Add account            |${ManagedAccount}Audi                                                                                                                        |on system      |${TemplateName}                    |with options|-description "${accDescription}" -ReviewCount ${specreqrevValue} -ReviewerType Auditor                                                                    |
|Add account            |${ManagedAccount}dflt                                                                                                                        |on system      |${TemplateName}                    |with options|-description "${accDescription}"                                                                                                                          |
|Try to Add system      |${newSystemName}                                                                                                                             |with parameters|-templateSystemName ${TemplateName}|with result |System changes for ${newSystemName} saved successfully                                                                                                    |
|List Systems by        |-systemName ${newSystemName}                                                                                                                 |output params  |SystemName                         |contain     |${newSystemName}                                                                                                                                          |
|List Accounts by filter|-systemName ${newSystemName} -AccountName ${ManagedAccount} -propsToList accountname,reviewCount,reviewerType,reviewerName                   |contains       |${ManagedAccount}\s+1\s+User\s+${reviwerUser}                                                                                                                                                              |
|List Accounts by filter|-systemName ${newSystemName} -AccountName ${ManagedAccount}2 -propsToList accountname,reviewCount,reviewerType,escalationTime,escalationEmail|contains       |${ManagedAccount}2\s+${specreqrevValue}\s+Any\s+${specreqrevValue}\s+${escalationEmail}                                                                                                                    |
|List Accounts by filter|-systemName ${newSystemName} -AccountName ${ManagedAccount}Grp -propsToList accountname,reviewCount,reviewerType,reviewerName                |contains       |${ManagedAccount}Grp\s+${specreqrevValue}\s+Group\s+${reviwerGrp}                                                                                                                                          |
|List Accounts by filter|-systemName ${newSystemName} -AccountName ${ManagedAccount}dflt -propsToList accountname,reviewCount                                         |contains       |${ManagedAccount}dflt\s+${defreqrevValue}                                                                                                                                                                  |
|List Accounts by filter|-systemName ${newSystemName} -AccountName ${ManagedAccount}Audi -propsToList accountname,reviewCount,reviewerType                            |contains       |${ManagedAccount}Audi\s+${specreqrevValue}\s+Auditor                                                                                                                                                       |
|Delete System          |${newSystemName}                                                                                                                                                                                                                                                                                                                                                         |
|Drop Member            |${reviwerUser}                                                                                                                               |from group     |"Global PPM Reviewer Group"                                                                                                                                                                                |
