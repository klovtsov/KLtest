!include -c <AutoTestsWebDrv.PowerShellNetApiScenarios.ScenarioLibrary
!include -c ScenarioLibrary
!3 Preparing stage
!|script                                                                                                                                                                                           |
|Add system     |${FirstSystemName}  |with address|${FirstSystemAddress}|platform     |${FirstSystemPlatform}|managed by|${FirstFunctAcct}|additional parameters|-functAcctPwd ${FirstFunctAcctPwd}|
|Add system     |${SecSystemName}    |with address|${SecSystemAddress}  |platform     |${SecSystemPlatform}  |managed by|${SecFunctAcct}  |additional parameters|-functAcctPwd ${SecFunctAcctPwd}  |
|Add Account    |${FirstManagedAcct} |on          |${FirstSystemName}   |with password|${FirstManagedAcctPwd}                                                                                      |
|Add Account    |${SecManagedAcct}   |on          |${SecSystemName}     |with password|${SecManagedAcctPwd}                                                                                        |
|Set Permissions|"PPM Requestor"     |on system   |${FirstSystemName}   |for user     |${Requestor}                                                                                                |
|Set Permissions|"PPM Requestor"     |on system   |${SecSystemName}     |for user     |${Requestor}                                                                                                |
|Set Permissions|"PPM Approver"      |on system   |${FirstSystemName}   |for user     |${Approver}                                                                                                 |
|Set Permissions|"PPM Approver"      |on system   |${SecSystemName}     |for user     |${Approver}                                                                                                 |
|Set Permissions|"Approver-Requestor"|on system   |${FirstSystemName}   |for user     |${API_user_1}                                                                                               |

!3 Create, approve and release  multi-account request
!|script                                                                                                            |
|Request Pwd             |${FirstManagedAcct}|from system|${FirstSystemName}|for             |${Requestor}          |
|Add account             |${SecManagedAcct}  |from system|${SecSystemName}|to request      |$RequestID            |
|Approve multi-request by|${Approver}                                                                               |
|Release password for    |${FirstManagedAcct}|by         |${Requestor}      |and compare with|${FirstManagedAcctPwd}|
|Release password for    |${SecManagedAcct}  |by         |${Requestor}      |and compare with|${SecManagedAcctPwd}  |
!3 Remove All
!|script                         |
|Delete System|${FirstSystemName}|
|Delete System|${SecSystemName}  |
