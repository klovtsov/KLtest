!define controlledByAccount {Managed by account check profile.}
!define controlledBySyncPwd {Managed by Sync password check profile.}
!include -c <SynchronizedPasswords.ScenarioLibrary

!4 Create Sync Passowrd and subscribe two accounts
!|script                                                                                                                                            |
|Add Sync Password|${SyncPasswordName}|with value|${SincPwdInitialValue}|Check Profile|${SyncPwdCheckProfile}|Change Profile|${SyncPwdChangeProfile}|
|Add Subscriber   |${ManagedAccount}  |from      |${SystemName}                                                                                     |
|Add Subscriber   |${ManagedAccount}  |from      |${SecSystemName}                                                                                  |
|pause            |${PauseValue}                                                                                                                    |

!4 Check account managed profile
!|script                                              |
|Check subscriber check profile|${controlledBySyncPwd}|

!4 Select "Use the check profiles on subscribed accounts" options
!|script                                                                                     |
|Update Sync Password          |${SyncPasswordName}|with options|--AccountLevelCheckProfile Y|
|Check subscriber check profile|${controlledByAccount}                                       |

!*> Delete synchronized passwords
!|script                                                                            |
|$res=            |CLI|${CLIBatch} DeleteSyncPass --SyncPassName ${SyncPasswordName}|
|Verify_Contain_OR|$res;;successfully deleted                                       |
*!