!* Test description
Whether to allow the functional account password to be requested and released.
*!
!define ManagedAccount {${FunctAcct}}

!include -c <PowerShellNetApiScenarios.ScenarioLibrary

!|script                                                                                                                                                                                      |
|Add system       |${SystemName}  |with address|${SystemAddress}   |platform|${SystemPlatform}|managed by|${FunctAcct}|additional parameters|-functAcctPwd ${FunctAcctPwd} -allowFuncReqFlag Y|
|Set Permissions  |"PPM Requestor"|on system   |${SystemName}      |for user|${API_user_1}                                                                                                    |
|Set Permissions  |"PPM Approver" |on system   |${SystemName}      |for user|${API_user_2}                                                                                                    |
|Retrieve Password|                                                                                                                                                                           |
|Verify_Contain_OR|$GeneratedPwd;;${FunctAcctPwd}                                                                                                                                             |
|Cancel Request by|${API_user_1}                                                                                                                                                              |
|Update System    |${SystemName}  |            |-AllowFuncReqFlag N|by user |${API_user_1}                                                                                                    |
|Retrieve Password|                                                                                                                                                                           |
|Verify_Contain_OR|$GeneratedPwd;;You are currently not authorized to release this password                                                                                                   |
|Delete System    |${SystemName}                                                                                                                                                              |
