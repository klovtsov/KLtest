!contents




!| scenario       |Delete User|userName                        |
|$res=            |CLI        |${CLIBatch} DeleteUser @userName|
|Verify_Contain_OR|$res;;successful                            |


!|scenario            |Add New User|UserName||Passwd||EMail|
|clickAndWait         |link=Add UserID                     |
|pause                |5000                                |
|waitForElementPresent|id=UserName                         |
|type;                |id=UserName |@UserName              |
|type;                |id=FirstName|Vasily                 |
|type;                |id=LastName |Pupkin                 |
|type;                |id=EmailID  |@EMail                 |
|type;                |id=sPassword|@Passwd                |
|type;                |id=Confirm  |@Passwd                |
|click                |id=SubmitChanges                    |
|waitForTextPresent   |*User added successfully*           |


!|scenario   |Double Step Open|URL||userName||primUserPwd||secUserPwd|
|open        |@URL                                                   |
|windowFocus                                                         |
|windowMaximize                                                      |
|click       |id=loginUserName                                       |
|type;       |id=loginUserName|@userName                             |
|click       |id=loginPassword                                       |
|type;       |id=loginPassword|@primUserPwd                          |
|typeKeys;   |id=loginPassword|@primUserPwd                          |
|pause       |4000                                                   |
|click       |id=btnLogin                                            |
|pause       |6000                                                  |
|type;       |id=sPasscode    |@secUserPwd                           |
|typeKeys;   |id=sPasscode    |@secUserPwd                           |
|pause       |4000                                                   |
|clickAndWait|name=B1                                                |
|pause       |4000                                                  |


!|scenario        |Double Step Login   |URL            |               |userName          |            |primUserPwd||secUserPwd|
|stop                                                                                                                          |
|pause            |5000                                                                                                        |
|start            |Slim Selenium Driver|${seleniumHost}|${seleniumPort}|${seleniumBrowser}|https://${TPAMHost}                 |
|setTimeoutSeconds|${seleniumTimeout}                                                                                          |
|pause            |5000                                                                                                        |
|Double Step Open |@URL                |               |@userName      |                  |@primUserPwd|           |@secUserPwd|



!|scenario         |Create Defender                              |
|Login             |${TPAMAdminURL} ||${TPAMMaster}||${MasterPwd}|
|pause             |10000                                        |
|clickAndWait      |link=Defender Config                         |
|click             |id=NewSystemButton                           |
|type;             |id=SystemName   |${DefenderName}             |
|type;             |id=ServerAddress|${DefenderAddress}          |
|type;             |id=AuthenTimeout|${AuthTimeout}              |
|type;             |id=Port         |${DefenderPort}             |
|type;             |id=ServerSecret |${DefenderSecret}           |
|click             |id=SubmitChangesButton                       |
|waitForTextPresent|New Defender added successfully              |



!|scenario         |Delete Defender                             |
|Login             |${TPAMAdminURL}||${TPAMMaster}||${MasterPwd}|
|pause             |10000                                       |
|clickAndWait      |link=Defender Config                        |
|select;           |id=ExtAuthCfgID|label=${DefenderName}       |
|click             |id=DeleteSystemButton                       |
|getConfirmation                                                |
|waitForTextPresent|*successfully                               |





!|scenario         |Create LDAP Server                           |
|Login             |${TPAMAdminURL} ||${TPAMMaster}||${MasterPwd}|
|pause             |10000                                        |
|clickAndWait      |link=LDAP Config                             |
|click             |id=NewSystemButton                           |
|type;             |id=SystemName   |${LDAPServerName}           |
|type;             |id=ServerAddress|${LDAPServerAddress}        |
|type;             |id=AuthenTimeout|${AuthTimeout}              |
|type;             |id=Port         |${LDAPPort}                 |
|click             |id=SubmitChangesButton                       |
|waitForTextPresent|New LDAP added successfully                  |



!|scenario         |Delete LDAP Server                          |
|Login             |${TPAMAdminURL}||${TPAMMaster}||${MasterPwd}|
|pause             |10000                                       |
|clickAndWait      |link=LDAP Config                            |
|select;           |id=ExtAuthCfgID|label=${LDAPServerName}     |
|click             |id=DeleteSystemButton                       |
|getConfirmation                                                |
|waitForTextPresent|*successfully                               |


!|scenario|Create OU                                                                                                                               |
|runBatch |LDAPAction;createou;${LDAPServerAddress};ou=${LDAPUserContainerName},${LDAPBaseName};${LDAPServerAdminDescription};${LDAPServerAdminPwd}|

!|scenario|Create User in Directory                                                                    |userName                                                                   |
|runBatch |LDAPAction;createuser;${LDAPServerAddress};ou=${LDAPUserContainerName},${LDAPBaseName};${LDAPServerAdminDescription};${LDAPServerAdminPwd};@userName;${LDAPUserPassword}|

!|scenario|Delete OU                                                                                                                               |
|runBatch |LDAPAction;deleteou;${LDAPServerAddress};ou=${LDAPUserContainerName},${LDAPBaseName};${LDAPServerAdminDescription};${LDAPServerAdminPwd}|

!|scenario|Delete User in Directory                                                          |userName                                                         |
|runBatch |LDAPAction;deleteuser;${LDAPServerAddress};ou=${LDAPUserContainerName},${LDAPBaseName};${LDAPServerAdminDescription};${LDAPServerAdminPwd};@userName|




!|scenario         |Create RADIUS Server                         |
|Login             |${TPAMAdminURL} ||${TPAMMaster}||${MasterPwd}|
|pause             |10000                                        |
|clickAndWait      |link=RADIUS Config                           |
|click             |id=NewSystemButton                           |
|type;             |id=SystemName   |${RADIUSServerName}         |
|type;             |id=ServerAddress|${RADIUSServerAddress}      |
|type;             |id=AuthenTimeout|${AuthTimeout}              |
|type;             |id=Port         |${RADIUSPort}               |
|type;             |id=ServerSecret |${RADIUSSecret}             |
|click             |id=SubmitChangesButton                       |
|waitForTextPresent|New RADIUS added successfully                |



!|scenario         |Delete RADIUS Server                        |
|Login             |${TPAMAdminURL}||${TPAMMaster}||${MasterPwd}|
|pause             |10000                                       |
|clickAndWait      |link=RADIUS Config                          |
|select;           |id=ExtAuthCfgID|label=${RADIUSServerName}   |
|click             |id=DeleteSystemButton                       |
|getConfirmation                                                |
|waitForTextPresent|*successfully                               |


!|scenario|Create RADIUS User                         |userName                         |                         |userPassword                        |
|runBatch |RADIUSAction;create;${RADIUSServerAddress};${RADIUSServerAdmin};${RADIUSServerAdminPwd};@userName;@userPassword;${RADIUSUsersConfigFilePath}|

!|scenario|Add RADIUS Client                               |clientAddress                               |                               |serverSecret                               |
|runBatch |RADIUSAction;config;${RADIUSServerAddress};${RADIUSServerAdmin};${RADIUSServerAdminPwd};${RADIUSClientsConfigFilePath};@clientAddress;@serverSecret;${RADIUSInitFilePath}|

!|scenario|Rollback RADIUS Config                                                                                                                                                     |
|runBatch |RADIUSAction;noconfig;${RADIUSServerAddress};${RADIUSServerAdmin};${RADIUSServerAdminPwd};${RADIUSClientsConfigFilePath};${RADIUSUsersConfigFilePath};${RADIUSInitFilePath}|




!|scenario         |Create WinAD                                 |
|Login             |${TPAMAdminURL} ||${TPAMMaster}||${MasterPwd}|
|pause             |10000                                        |
|clickAndWait      |link=WinAD Config                            |
|click             |id=NewSystemButton                           |
|type;             |id=SystemName   |${DCName}                   |
|type;             |id=ServerAddress|${DCAddress}                |
|type;             |id=AuthenTimeout|${AuthTimeout}              |
|click             |id=SubmitChangesButton                       |
|waitForTextPresent|New WinAD added successfully                 |



!|scenario         |Delete WinAD                                |
|Login             |${TPAMAdminURL}||${TPAMMaster}||${MasterPwd}|
|pause             |10000                                       |
|clickAndWait      |link=WinAD Config                           |
|select;           |id=ExtAuthCfgID|label=${DCName}             |
|click             |id=DeleteSystemButton                       |
|getConfirmation                                                |
|waitForTextPresent|*successfully                               |

!|scenario|Create User in AD                       |userName                      |                      |userPassword                      |
|runBatch |adextuser;create;${DCAddress};${ADDomainAdmin};${ADDomainAdminPwd};@userName;@userPassword;cn=Users,${ADBaseName};${ADDomainName}|

!|scenario|Delete User in AD                                     |userName                                    |
|runBatch |adextuser;delete;${DCAddress};${ADDomainAdmin};${ADDomainAdminPwd};@userName;cn=Users,${ADBaseName}|


!|scenario               |Prepare Environment                     |
|Create Defender                                                  |
|Create LDAP Server                                               |
|Create OU                                                        |
|Create User in Directory|${LDAPUserName}  ||${LDAPUserPassword}  |
|Create RADIUS Server                                             |
|Create RADIUS User      |${RADIUSUserName}||${RADIUSUserPassword}|
|Add RADIUS Client       |${TPAMHost}      ||${RADIUSSecret}      |
|Create WinAD                                                     |
|Create User in AD       |${ADUserName}    ||${ADUserPassword}    |



!|scenario               |Delete Environment              |
|Delete Defender                                          |
|Delete LDAP Server                                       |
|Delete User in Directory|${LDAPUserName}                 |
|Delete OU                                                |
|Delete RADIUS Server                                     |
|Rollback RADIUS Config                                   |
|Delete WinAD                                             |
|Delete User in AD       |${ADUserName}||${ADUserPassword}|



!|scenario  |Prepare Test|
|Add User   |${UserName} |
|pause      |15000       |
|Update User|${UserName} |

!| scenario       |Update User|userName                                                                                                                                            |
|$res=            |CLI        |${CLIBatch} UpdateUser --UserName @userName --LastName Liu --FirstName Lucy --Email Lucy@Liu --Phone 77777777 --Mobile 888888 --Description opisanie|
|Verify_Contain_OR|$res;;successful                                                                                                                                                |




!|scenario  |Clear Test    |
|Delete User|${UserName}   |
|Delete User|${NewUserName}|
