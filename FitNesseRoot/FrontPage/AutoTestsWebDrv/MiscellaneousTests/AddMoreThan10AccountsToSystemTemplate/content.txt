!*> Test Description
A system template can't contain more than 10 accounts
*!

!define SystemName {${prefix}Sample}
!define SystemPlatform {Linux}
!define FunctAcct {master}
!define TemplateName {${prefix}Lekalo}
!define SystemAddress {10.30.136.146}
!define SpecValue {sudo}
!define AccountPrefix {taco}
!define AccountPwd {$ecReT}
!define failedMessage {Can not add more than 10 accounts to a template system.}

!include -c <AutoTestsWebDrv.AccountDiscovery.ScenarioLibrary
!include -c <AutoTestsWebDrv.MiscellaneousTests.CreateSystemFromTemplateByIsa.TestSpecific
!include -c <AutoTestsWebDrv.PowerShellNetApiScenarios.ScenarioLibrary
!include -c <AutoTestsWebDrv.PropagateOptionsFromTemplate.ScenarioLibrary


!4 Prepare environment (system with 10 accounts)
!|script                                                                                                                                                                            |
|Add system          |${SystemName}     |with address|${SystemAddress}|platform     |${SystemPlatform}|managed by|${FunctAcct}|additional parameters|-PlatSpecificValue ${SpecValue}|
|Make System Template|${TemplateName}   |from        |${SystemName}   |with account |${FunctAcct}                                                                                   |
|Add Account         |${AccountPrefix}1 |on          |${TemplateName} |with password|${AccountPwd}                                                                                  |
|Add Account         |${AccountPrefix}2 |on          |${TemplateName} |with password|${AccountPwd}                                                                                  |
|Add Account         |${AccountPrefix}3 |on          |${TemplateName} |with password|${AccountPwd}                                                                                  |
|Add Account         |${AccountPrefix}4 |on          |${TemplateName} |with password|${AccountPwd}                                                                                  |
|Add Account         |${AccountPrefix}5 |on          |${TemplateName} |with password|${AccountPwd}                                                                                  |
|Add Account         |${AccountPrefix}6 |on          |${TemplateName} |with password|${AccountPwd}                                                                                  |
|Add Account         |${AccountPrefix}7 |on          |${TemplateName} |with password|${AccountPwd}                                                                                  |
|Add Account         |${AccountPrefix}8 |on          |${TemplateName} |with password|${AccountPwd}                                                                                  |
|Add Account         |${AccountPrefix}9 |on          |${TemplateName} |with password|${AccountPwd}                                                                                  |

!4 Try to add one more account by API
!|script                                                                                                                          |
|Try to Add account|${AccountPrefix}A|on system|${TemplateName}|with options|-Description TestAccount|with result|${failedMessage}|

!4 Try to add one more account by CLI
!|script                                                                                                                                                                      |
|$res=            |CLI|${CLIBatch} AddAccount --System ${TemplateName} --AccountName ${AccountPrefix}B --Password ${AccountPwd} --Description \"${ManagedAccountDescription}\"|
|Verify_Contain_OR|$res;;${failedMessage}                                                                                                                                     |

  
!4 Delete all systems
!|script                                              |
|Delete System|${SystemName}                          |
|Login        |${TPAMURL}||${TPAMAdmin}||${DefaultPwd}|
|Remove system|${TemplateName}                        |
|Logout Paradmin                                      |
