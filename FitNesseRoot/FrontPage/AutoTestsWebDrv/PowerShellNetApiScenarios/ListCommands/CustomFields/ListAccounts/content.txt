!define customValue1 {FirstCustom}
!define customValue2 {FourCustom}
!define customValue3 {nonFirst}
!define secondSystem {${prefix}Forester}
!define thirdSystem {${prefix}HighLander}

!include -c <PowerShellNetApiScenarios.ScenarioLibrary
!3 Filter by SystemCustom Field
!|script                                                                                                                                                                                                                                                   |
|Add system             |${SystemName}                                                                             |with address    |${SystemAddress}|platform    |${SystemPlatform}|managed by|${FunctAcct}|additional parameters|-custom3 ${customValue1}|
|Add system             |${secondSystem}                                                                           |with address    |${SystemAddress}|platform    |${SystemPlatform}|managed by|${FunctAcct}|additional parameters|-custom3 ${customValue2}|
|Add account            |${ManagedAccount}                                                                         |on system       |${SystemName}   |with options|-custom5 ${customValue3}                                                                |
|Add account            |${ManagedAccount}                                                                         |on system       |${secondSystem} |with options|-custom5 ${customValue1}                                                                |
|List Accounts by filter|-AccountName ${prefix}* -SystemCustom3 ${customValue2} -propsToList accountName,systemName|contains        |${ManagedAccount}\s+${secondSystem}                                                                                   |
|List Accounts by filter|-AccountName ${prefix}* -SystemCustom3 ${customValue2} -propsToList accountName,systemName|does not contain|${SystemName}                                                                                                         |
!3 Filter by AccountCustom Field
!|script                                                                                                                                                               |
|List Accounts by filter|-AccountName ${prefix}* -AccountCustom5 ${customValue3} -propsToList accountName,systemName|contains        |${ManagedAccount}\s+${SystemName}|
|List Accounts by filter|-AccountName ${prefix}* -AccountCustom5 ${customValue3} -propsToList accountName,systemName|does not contain|${secondSystem}                  |
!3 Update account custom field
!|script                                                                                                                                        |
|Update Account         |${ManagedAccount}                                                              |        |-custom5 ${customValue1}      |
|List Accounts by filter|-AccountName ${prefix}* -AccountCustom5 ${customValue1} -propsToList systemName|contains|${secondSystem}.*${SystemName}|
!3 Delete Systems
!|script                      |
|Delete System|${secondSystem}|
|Delete System|${SystemName}  |
