!contents



!| scenario              |Prepare Environment                    |
|Login                   |${TPAMURL}||${TPAMAdmin}||${DefaultPwd}|
|Add System                                                      |
|Create Batch Files                                              |
|Batch Import Users      |${UsersFileName}                       |
|Batch Import Accounts   |${AccountsFileName}                    |
|Batch Update Permissions|${PermissionsFileName}                 |
|Change Web-enabled Users Passwords                              |


!| scenario        |Clear Environment                      |
|Login             |${TPAMURL}||${TPAMAdmin}||${DefaultPwd}|
|Create Batch Files                                        |
|Batch Delete Users|Sim_Users_List.txt                     |
|Delete System                                             |


!| scenario       |Execute Requests|requestsQuantity                                                                                       |
|$res=            |GroovyWebDriver |RequestPassword;${TPAMHost};${UserName};${UserPwd};${SystemName};${AccountName};@requestsQuantity      |
|Verify_Contain_OR|$res;;requested                                                                                                         |
|pause            |60000                                                                                                                   |
|$res=            |GroovyWebDriver |CancelPasswordRequest;${TPAMHost};${UserName};${UserPwd};${SystemName};${AccountName};@requestsQuantity|
|Verify_Contain_OR|$res;;canceled                                                                                                          |






!| scenario|Create Batch Files|
|Create Users List            |
|Create Accounts List         |
|Create Permissions List      |

!| scenario|Create Users List                                                                                                                                |
|runBatch  |CreateSimUsersList;${PathToBatch};${UsersFileName};${prefix};${UserBaseName};${UserType};${UserInterface};${UserInitialPassword};${UsersQuantity}|

!| scenario|Create Accounts List                                                                                                                             |
|runBatch  |CreateSimAccountsList;${PathToBatch};${AccountsFileName};${prefix};${SystemName};${AccountBaseName};${AccountInitialPassword};${AccountsQuantity}|

!| scenario|Create Permissions List                                                                                                              |
|runBatch  |CreateSimPermissionsList;${PathToBatch};${PermissionsFileName};${prefix};${SystemName};${UserBaseName};${PolicyName};${UsersQuantity}|




!|scenario            |Batch Import Accounts             |filename                         |
|clickAndWait         |link=Import Accounts              |                                 |
|pause                |2000                                                                |
|click                |id=PAMUploadBtnSelect                                               |
|SWait                |browse.PNG                                                          |
|SClick               |browse.PNG                                                          |
|pause                |1500                                                                |
|SType                |${PathToBatch}@filename                                             |
|pause                |1500                                                                |
|SWait                |open.PNG                                                            |
|SClick               |open.PNG                                                            |
|pause                |2000                                                                |
|SWait                |upload_small.PNG                                                    |
|SClick               |upload_small.PNG                                                    |
|pause                |2000                                                                |
|type;                |id=Comment2                       |import accounts                  |
|click                |id=btnProcessFile                 |                                 |
|pause                |1500                                                                |
|waitForElementPresent|//tr[@id='80']                                                      |
|pause                |120000                                                              |
|verifyText           |//div[@id='divBatchResults']/table||Accounts were successfully added|




!|scenario            |Batch Import Users                |filename                      |
|clickAndWait         |link=Import UserIDs               |                              |
|pause                |2000                                                             |
|click                |id=PAMUploadBtnSelect                                            |
|SWait                |browse.PNG                                                       |
|SClick               |browse.PNG                                                       |
|pause                |1500                                                             |
|SType                |${PathToBatch}@filename                                          |
|pause                |1500                                                             |
|SWait                |open.PNG                                                         |
|SClick               |open.PNG                                                         |
|pause                |2000                                                             |
|SWait                |upload_small.PNG                                                 |
|SClick               |upload_small.PNG                                                 |
|pause                |2000                                                             |
|type;                |id=Comment2                       |import users                  |
|click                |id=btnProcessFile                 |                              |
|pause                |1500                                                             |
|waitForElementPresent|//tr[@id='80']                                                   |
|pause                |180000                                                           |
|verifyText           |//div[@id='divBatchResults']/table||Users were successfully added|



!|scenario            |Batch Update Permissions          |filename                                                        |
|clickAndWait         |link=Update Permissions           |                                                                |
|pause                |2000                                                                                               |
|click                |id=PAMUploadBtnSelect                                                                              |
|SWait                |browse.PNG                                                                                         |
|SClick               |browse.PNG                                                                                         |
|pause                |1500                                                                                               |
|SType                |${PathToBatch}@filename                                                                            |
|pause                |1500                                                                                               |
|SWait                |open.PNG                                                                                           |
|SClick               |open.PNG                                                                                           |
|pause                |2000                                                                                               |
|SWait                |upload_small.PNG                                                                                   |
|SClick               |upload_small.PNG                                                                                   |
|pause                |2000                                                                                               |
|type;                |id=Comment2                       |update permissions                                              |
|click                |id=btnProcessFile                 |                                                                |
|pause                |1500                                                                                               |
|waitForElementPresent|//tr[@id='7']                                                                                      |
|pause                |360000                                                                                             |
|verifyText           |//div[@id='divBatchResults']/table||Adding Permissions to the following Systems, Accounts, or Files|
|pause                |${ApplyNewPoliciesInterval}                                                                        |




!|scenario            |Batch Delete Users                |filename                     |
|clickAndWait         |link=Update UserIDs               |                             |
|pause                |2000                                                            |
|click                |id=PAMUploadBtnSelect                                           |
|SWait                |browse.PNG                                                      |
|SClick               |browse.PNG                                                      |
|pause                |1500                                                            |
|SType                |${PathToBatch}@filename                                         |
|pause                |1500                                                            |
|SWait                |open.PNG                                                        |
|SClick               |open.PNG                                                        |
|pause                |2000                                                            |
|SWait                |upload_small.PNG                                                |
|SClick               |upload_small.PNG                                                |
|pause                |2000                                                            |
|click                |id=Radio1                         |                             |
|type;                |id=Comment2                       |delete users                 |
|click                |id=btnProcessFile                 |                             |
|pause                |1500                                                            |
|waitForElementPresent|//tr[@id='80']                                                  |
|pause                |480000                                                          |
|verifyText           |//div[@id='divBatchResults']/table||Deleting the following Users|



!|scenario        |Logon Using Discovered User                                                                 |
|$res=            |CLI|${CLIBatch} ChangeUserPassword --UserName ${DiscoveredUserName} --Password ${DefaultPwd}|
|Verify_Contain_OR|$res;;successful                                                                            |
|$res=            |CLI|${CLIBatch} ChangeUserPassword --UserName ${DiscoveredUserName} --Password ${UserPwd}   |
|Verify_Contain_OR|$res;;successful                                                                            |



!| scenario       |Add System                                                                                                                                                                                                                        |
|$res=            |CLI|${CLIBatch} AddSystem --SystemName ${SystemName} --NetworkAddress ${SystemAddress} --PlatformName \"${SystemPlatform}\" --FunctionalAccount ${FunctAcct} --FuncAcctCred \"${FunctAcctPwd}\" --CheckFlag N --ChangeFrequency -2|
|Verify_Contain_OR|$res;;successful                                                                                                                                                                                                                  |

!| scenario       |Delete System|                                      |
|$res=            |CLI          |${CLIBatch} DeleteSystem ${SystemName}|
|Verify_Contain_OR|$res;;successful                                    |



!| scenario        |Change Web-enabled Users Passwords                                                                            |
|$res=             |GroovyWebDriver|ChangeUserPasswords;${TPAMHost};${UserName};${UserInitialPassword};${UserPwd};${UsersQuantity}|
|Verify_Contain_NOT|$res;;Error changing password                                                                                 |


!| scenario        |Check Users Passwords                                                                 |
|$res=             |GroovyWebDriver|CheckUserPasswords;${TPAMHost};${UserName};${UserPwd};${UsersQuantity}|
|Verify_Contain_NOT|$res;;Error changing password                                                         |



#|Change Pwd       |${DiscoveredUserName}|             |${DefaultPwd}                    |            |${UserPwd}                 |
