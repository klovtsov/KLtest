!| scenario        |Make System Template|templName         |from         |sysName         |with account         |accntName         |
|$res =            |GroovyWebDriver     |createSystemTemplate;${TPAMHost};${TPAMAdmin};${DefaultPwd};@sysName;@accntName;@templName|
|Verify_Contain_NOT|$res;;something went wrong                                                                                     |

!| scenario        |Make System Template|templName  |from |sysName |with account |accntName |retain permissions |permFlag |retain membership |membFlag |
|$res =            |GroovyWebDriver     |createSystemTemplate;${TPAMHost};${TPAMAdmin};${DefaultPwd};@sysName;@accntName;@templName;@membFlag;@permFlag|
|Verify_Contain_NOT|$res;;something went wrong                                                                                                         |

!| scenario        |Make User Template|templName   |from   |exampleUserName   |retain permissions   |permFlag   |retain membership   |membFlag  |
|$res =            |GroovyWebDriver   |createUserTemplate;${TPAMHost};${TPAMAdmin};${DefaultPwd};@exampleUserName;@templName;@membFlag;@permFlag|
|Verify_Contain_NOT|$res;;something went wrong                                                                                                  |

!| scenario        |Make User Template|templName          |from         |exampleUserName         |with result         |expected         |
|$res =            |GroovyWebDriver   |createUserTemplate;${TPAMHost};${TPAMAdmin};${DefaultPwd};@exampleUserName;@templName;false;false|
|Verify_Contain_NOT|$res;;something went wrong                                                                                          |
|Verify_Contain_OR |$res;;@expected                                                                                                     |

!|scenario        |Check EnableBeforeReleaseFlag|accountName             |with result            |result            |
|$res=            |GroovyWebDriver              |CheckAccountControlsForEnableBeforeRelease;${TPAMHost};@accountName|
|Verify_Contain_OR|$res;;@result                                                                                    |

!|scenario     |Check Require Multi-Group checkbox and select groups                       |
|Choose Account|${TemplateName}                   |           |${ManagedAccount}           |
|click         |id=Details                                                                 |
|type;         |id=MinApprovers                   |2                                       |
|pause         |500                                                                        |
|click         |id=cbxPwdMultiApprovers                                                    |
|click         |xpath=//select[@id='PwdMultiApproverGroups']/option[.='${firstGroupName}'] |
|click         |xpath=//select[@id='PwdMultiApproverGroups']/option[.='${secondGroupName}']|
|pause         |500                                                                        |
|click         |id=SubmitChangesButton                                                     |
|waitForResult |Changes saved successfully for ${ManagedAccount}                           |


!|scenario        |Set Permissions |policy            |on  account            |accountName            |from            |system            |for user            |username            |
|$res=            |PowerShellScript|setAccessPolicy.ps1 ${psConnectOptions}  -systemName @system -accountName @accountName -Action ADD -AccessPolicyName @policy -UserName @username|
|Verify_Contain_OR|$res;;successful                                                                                                                                                 |

!|scenario        |Set Permissions |policy            |on  account            |accountName            |from            |system            |for group            |groupName            |
|$res=            |PowerShellScript|setAccessPolicy.ps1 ${psConnectOptions}  -systemName @system -accountName @accountName -Action ADD -AccessPolicyName @policy -GroupName @groupName|
|Verify_Contain_OR|$res;;successful                                                                                                                                                   |

!|scenario         |Delete User Template|templateName                                                   |
|$res =            |GroovyWebDriver     |deleteUser;${TPAMHost};${TPAMAdmin};${DefaultPwd};@templateName|
|Verify_Contain_NOT|$res;;something went wrong                                                          |

!|scenario        |Create User     |newUser                          |from template                          |template                          |
|$res=            |PowerShellScript|addUser.ps1 ${psConnectOptions}  -userName @newUser -firstname Joe -lastname Doe -TemplateUserName @template|
|Verify_Contain_OR|$res;;successful                                                                                                             |

!|scenario         |Create Non Web User Template|templateName      |interface     |usrinterface     |type     |usrType     |restricted hosts     |resthosts     |
|$res =            |GroovyWebDriver             |createNonWebUserTemplate;${TPAMHost};${TPAMAdmin};${DefaultPwd};@templateName;@usrinterface;@usrType;@resthosts|
|Verify_Contain_NOT|$res;;Can't add user                                                                                                                        |
|Verify_Contain_NOT|$res;;something went wrong                                                                                                                  |
