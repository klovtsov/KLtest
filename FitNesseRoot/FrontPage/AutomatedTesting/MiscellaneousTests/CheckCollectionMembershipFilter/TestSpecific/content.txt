!contents


!|scenario                                                |Check Collection Membership Filter BFER 6076                                                   |
|Login                                                    |${TPAMURL}     ||${TPAMAdmin}     ||${DefaultPwd}                                              |
|pause                                                    |5000                                                                                           |
|Check System and Account Collection Membership           |${System2Name} ||${CollectionName}||${Account1Name}.*${Account2Name}||${File2Name}             |
|Check System and Account Collection Membership           |${System2Name} ||${CollectionName}||${Account1Name}.*${Account2Name}||${FunctionalAccount2Name}|
|Check System and Functional Account Collection Membership|${System2Name} ||${CollectionName}||${FunctionalAccount2Name}       ||${Account2Name}          |
|Check System and File Collection Membership              |${System2Name} ||${CollectionName}||${File2Name}                    ||${Account2Name}          |
|Check System and File Collection Membership              |${System2Name} ||${CollectionName}||${File2Name}                    ||${Account1Name}          |
|Check System Collection Membership                       |${System1Name} ||${CollectionName}||${System1Name}                  ||${File1Name}             |
|Check Account Collection Membership                      |${Account1Name}||${CollectionName}||${Account1Name}                 ||${Account2Name}          |
|Check Account Collection Membership                      |${Account2Name}||${CollectionName}||${Account2Name}                 ||${File2Name}             |
|Check File Collection Membership                         |${File2Name}   ||${CollectionName}||${File2Name}                    ||${Account1Name}          |
|Check System and Account Collection Membership           |${Pattern}     ||${CollectionName}||${Account1Name}.*${Account2Name}||${FunctionalAccount2Name}|
|Check System and Functional Account Collection Membership|${Pattern}     ||${CollectionName}||${FunctionalAccount2Name}       ||${Account2Name}          |
|Check System and File Collection Membership              |${Pattern}     ||${CollectionName}||${File2Name}                    ||${Account2Name}          |



!|scenario            |Check System Collection Membership      |filterValue||collectionName||contains||notContains|
|clickAndWait         |link=Manage Collections                                                                    |
|type;                |id=CollectionNm                         |@collectionName                                   |
|click                |id=Listing                              |                                                  |
|waitForElementPresent|//td[contains(text(),'@collectionName')]|                                                  |
|mouseDown            |//td[contains(text(),'@collectionName')]|                                                  |
|click                |//td[contains(text(),'@collectionName')]|                                                  |
|click                |id=Members                                                                                 |
|waitForElementPresent|id=cb_acmAssigned                                                                          |
|click                |id=cb_acmAssigned                                                                          |
|type;                |id=acmFilterName                        |@filterValue                                      |
|click                |id=cbxFltAcct                                                                              |
|click                |id=cbxFltFile                                                                              |
|click                |id=Results                                                                                 |
|waitForElementPresent|//div[@id='collTableDiv']                                                                  |
|$res=                |getText                                 |//div[@id='collTableDiv']                         |
|Verify_Contain_OR    |$res;;@contains                                                                            |
|Verify_Contain_NOT   |$res;;@notContains                                                                         |
#|click                |//div[@id='collectionTabs']/ul/li[2]/a                                       |


!|scenario            |Check Account Collection Membership     |filterValue||collectionName||contains||notContains|
|clickAndWait         |link=Manage Collections                                                                    |
|type;                |id=CollectionNm                         |@collectionName                                   |
|click                |id=Listing                              |                                                  |
|waitForElementPresent|//td[contains(text(),'@collectionName')]|                                                  |
|mouseDown            |//td[contains(text(),'@collectionName')]|                                                  |
|click                |//td[contains(text(),'@collectionName')]|                                                  |
|click                |id=Members                                                                                 |
|waitForElementPresent|id=cb_acmAssigned                                                                          |
|click                |id=cb_acmAssigned                                                                          |
|type;                |id=acmFilterName                        |@filterValue                                      |
|click                |id=cbxFltSys                                                                               |
|click                |id=cbxFltFile                                                                              |
|click                |id=rb_ACMFA_Non                                                                            |
|click                |id=Results                                                                                 |
|waitForElementPresent|//div[@id='collTableDiv']                                                                  |
|$res=                |getText                                 |//div[@id='collTableDiv']                         |
|Verify_Contain_OR    |$res;;@contains                                                                            |
|Verify_Contain_NOT   |$res;;@notContains                                                                         |

!|scenario            |Check Functional Account Collection Membership|filterValue||collectionName||contains||notContains|
|clickAndWait         |link=Manage Collections                                                                          |
|type;                |id=CollectionNm                               |@collectionName                                   |
|click                |id=Listing                                    |                                                  |
|waitForElementPresent|//td[contains(text(),'@collectionName')]      |                                                  |
|mouseDown            |//td[contains(text(),'@collectionName')]      |                                                  |
|click                |//td[contains(text(),'@collectionName')]      |                                                  |
|click                |id=Members                                                                                       |
|waitForElementPresent|id=cb_acmAssigned                                                                                |
|click                |id=cb_acmAssigned                                                                                |
|type;                |id=acmFilterName                              |@filterValue                                      |
|click                |id=cbxFltSys                                                                                     |
|click                |id=cbxFltFile                                                                                    |
|click                |id=rb_ACMFA_Only                                                                                 |
|click                |id=Results                                                                                       |
|waitForElementPresent|//div[@id='collTableDiv']                                                                        |
|$res=                |getText                                       |//div[@id='collTableDiv']                         |
|Verify_Contain_OR    |$res;;@contains                                                                                  |
|Verify_Contain_NOT   |$res;;@notContains                                                                               |


!|scenario            |Check System and Account Collection Membership|filterValue||collectionName||contains||notContains|
|clickAndWait         |link=Manage Collections                                                                          |
|type;                |id=CollectionNm                               |@collectionName                                   |
|click                |id=Listing                                    |                                                  |
|waitForElementPresent|//td[contains(text(),'@collectionName')]      |                                                  |
|mouseDown            |//td[contains(text(),'@collectionName')]      |                                                  |
|click                |//td[contains(text(),'@collectionName')]      |                                                  |
|click                |id=Members                                                                                       |
|waitForElementPresent|id=cb_acmAssigned                                                                                |
|click                |id=cb_acmAssigned                                                                                |
|type;                |id=acmFilterName                              |@filterValue                                      |
|click                |id=cbxFltFile                                                                                    |
|click                |id=rb_ACMFA_Non                                                                                  |
|click                |id=Results                                                                                       |
|waitForElementPresent|//div[@id='collTableDiv']                                                                        |
|$res=                |getText                                       |//div[@id='collTableDiv']                         |
|Verify_Contain_OR    |$res;;@contains                                                                                  |
|Verify_Contain_NOT   |$res;;@notContains                                                                               |

!|scenario            |Check System and Functional Account Collection Membership|filterValue||collectionName||contains||notContains|
|clickAndWait         |link=Manage Collections                                                                                     |
|type;                |id=CollectionNm                                          |@collectionName                                   |
|click                |id=Listing                                               |                                                  |
|waitForElementPresent|//td[contains(text(),'@collectionName')]                 |                                                  |
|mouseDown            |//td[contains(text(),'@collectionName')]                 |                                                  |
|click                |//td[contains(text(),'@collectionName')]                 |                                                  |
|click                |id=Members                                                                                                  |
|waitForElementPresent|id=cb_acmAssigned                                                                                           |
|click                |id=cb_acmAssigned                                                                                           |
|type;                |id=acmFilterName                                         |@filterValue                                      |
|click                |id=cbxFltFile                                                                                               |
|click                |id=rb_ACMFA_Only                                                                                            |
|click                |id=Results                                                                                                  |
|waitForElementPresent|//div[@id='collTableDiv']                                                                                   |
|$res=                |getText                                                  |//div[@id='collTableDiv']                         |
|Verify_Contain_OR    |$res;;@contains                                                                                             |
|Verify_Contain_NOT   |$res;;@notContains                                                                                          |


!|scenario            |Check File Collection Membership        |filterValue||collectionName||contains||notContains|
|clickAndWait         |link=Manage Collections                                                                    |
|type;                |id=CollectionNm                         |@collectionName                                   |
|click                |id=Listing                              |                                                  |
|waitForElementPresent|//td[contains(text(),'@collectionName')]|                                                  |
|mouseDown            |//td[contains(text(),'@collectionName')]|                                                  |
|click                |//td[contains(text(),'@collectionName')]|                                                  |
|click                |id=Members                                                                                 |
|waitForElementPresent|id=cb_acmAssigned                                                                          |
|click                |id=cb_acmAssigned                                                                          |
|type;                |id=acmFilterName                        |@filterValue                                      |
|click                |id=cbxFltAcct                                                                              |
|click                |id=cbxFltSys                                                                               |
|click                |id=Results                                                                                 |
|waitForElementPresent|//div[@id='collTableDiv']                                                                  |
|$res=                |getText                                 |//div[@id='collTableDiv']                         |
|Verify_Contain_OR    |$res;;@contains                                                                            |
|Verify_Contain_NOT   |$res;;@notContains                                                                         |


!|scenario            |Check System and File Collection Membership|filterValue||collectionName||contains||notContains|
|clickAndWait         |link=Manage Collections                                                                       |
|type;                |id=CollectionNm                            |@collectionName                                   |
|click                |id=Listing                                 |                                                  |
|waitForElementPresent|//td[contains(text(),'@collectionName')]   |                                                  |
|mouseDown            |//td[contains(text(),'@collectionName')]   |                                                  |
|click                |//td[contains(text(),'@collectionName')]   |                                                  |
|click                |id=Members                                                                                    |
|waitForElementPresent|id=cb_acmAssigned                                                                             |
|click                |id=cb_acmAssigned                                                                             |
|type;                |id=acmFilterName                           |@filterValue                                      |
|click                |id=cbxFltAcct                                                                                 |
|click                |id=Results                                                                                    |
|waitForElementPresent|//div[@id='collTableDiv']                                                                     |
|$res=                |getText                                    |//div[@id='collTableDiv']                         |
|Verify_Contain_OR    |$res;;@contains                                                                               |
|Verify_Contain_NOT   |$res;;@notContains                                                                            |

!| scenario               |Create Objects                                                                                                         |
|Add System               |${System1Name}||${System1Address}        ||${System1Platform}||${FunctionalAccount1Name}||${FunctionalAccount1Password}|
|Add System               |${System2Name}||${System2Address}        ||${System2Platform}||${FunctionalAccount2Name}||${FunctionalAccount2Password}|
|Add Account              |${System2Name}||${Account1Name}          ||${Account1Password}                                                         |
|Add Account              |${System2Name}||${Account2Name}          ||${Account2Password}                                                         |
|Create File              |${FilePath}   ||${File1Name}                                                                                           |
|Create File              |${FilePath}   ||${File2Name}                                                                                           |
|Add File                 |${System1Name}||${File1Name}                                                                                           |
|Add File                 |${System2Name}||${File2Name}                                                                                           |
|Add Collection           |${CollectionName}                                                                                                      |
|Add System To Collection |${System1Name}||${CollectionName}                                                                                      |
|Add Account To Collection|${System2Name}||${Account1Name}          ||${CollectionName}                                                           |
|Add Account To Collection|${System2Name}||${Account2Name}          ||${CollectionName}                                                           |
|Add Account To Collection|${System2Name}||${FunctionalAccount2Name}||${CollectionName}                                                           |
|Add File To Collection   |${System2Name}||${File2Name}             ||${CollectionName}                                                           |



!| scenario       |Remove Objects           |
|Remove System    |${System1Name}           |
|Remove System    |${System2Name}           |
|Delete File      |${FilePath}||${File1Name}|
|Delete File      |${FilePath}||${File2Name}|
|Remove Collection|${CollectionName}        |


!| scenario       |Add System|systemName               |               |systemAddress               |               |systemPlatform              |              |functionalAccount              |              |accountPassword              |
|$res=            |CLI       |${CLIBatch} AddSystem --SystemName @systemName --NetworkAddress @systemAddress --PlatformName @systemPlatform --FunctionalAccount @functionalAccount --FuncAcctCred @accountPassword --Timeout ${SystemTimeout}|
|Verify_Contain_OR|$res;;successful                                                                                                                                                                                                          |

!| scenario       |Remove System|systemName                                       |
|$res=            |CLI          |${CLIBatch} DeleteSystem --SystemName @systemName|
|Verify_Contain_OR|$res;;successful                                               |



!| scenario       |Add Account|systemName                           |                           |accountName                           |                           |accountPassword                           |
|$Months=         |getEval    |var d = new Date();d.setUTCMinutes(d.getUTCMinutes()+1); d.setUTCDate(d.getUTCDate()+1);var s = d.getUTCMonth()+1;if ((s + "").length == 1) s = "0" + s;else d.getUTCMonth()+1;|
|$Days=           |getEval    |var d = new Date();d.setUTCMinutes(d.getUTCMinutes()+1); d.setUTCDate(d.getUTCDate()+1);var s = d.getUTCDate(); if ((s + "").length == 1) s = "0" + s;else d.getUTCDate();     |
|$Years=          |getEval    |var d = new Date();d.setUTCMinutes(d.getUTCMinutes()+1); d.setUTCDate(d.getUTCDate()+1); d.getUTCFullYear();                                                                   |
|$res=            |CLI        |${CLIBatch} AddAccount --System @systemName --AccountName @accountName --Password @accountPassword  --NextChangeDate $Months/$Days/$Years                                      |
|Verify_Contain_OR|$res;;successful                                                                                                                                                                           |


!| scenario       |Remove Account|systemName                  |                  |accountName                  |
|$res=            |CLI           |${CLIBatch} DeleteAccount --SystemName @systemName --AccountName @accountName|
|Verify_Contain_OR|$res;;successful                                                                            |


!| scenario       |Add Collection|collectionName                                            |
|$res=            |CLI           |${CLIBatch} AddCollection --CollectionName @collectionName|
|Verify_Contain_OR|$res;;successful                                                         |

!| scenario       |Remove Collection|collectionName                                             |
|$res=            |CLI              |${CLIBatch} DropCollection --CollectionName @collectionName|
|Verify_Contain_OR|$res;;successful                                                             |


!|scenario        |Add System To Collection|systemName                     |                     |collectionName                     |
|$res=            |CLI                     |${CLIBatch} AddCollectionMember --SystemName @systemName --CollectionName @collectionName|
|Verify_Contain_OR|$res;;successful                                                                                                  |

!|scenario        |Add Account To Collection|systemName                |                |accountName               |               |collectionName               |
|$res=            |CLI                      |${CLIBatch} AddCollectionMember --AccountName @accountName --SystemName @systemName --CollectionName @collectionName|
|Verify_Contain_OR|$res;;successful                                                                                                                              |

!|scenario        |Add File To Collection|systemName               |               |fileName               |               |collectionName              |
|$res=            |CLI                   |${CLIBatch} AddCollectionMember --FileName @fileName --SystemName @systemName --CollectionName @collectionName|
|Verify_Contain_OR|$res;;successful                                                                                                                     |


!|scenario|Create File|filepath||filename|
|runBatch |CreateFile;@filepath;@filename|


!|scenario|Delete File|filepath||filename|
|runBatch |DeleteFile;@filepath;@filename|


!|scenario         |Add File       |systemName                           |                           |fileName                           |
|$res =            |GroovyWebDriver|tryToCreateFile;${TPAMHost};${TPAMAdmin};${DefaultPwd};@systemName;${FilePath}@fileName.txt;@fileName|
|Verify_Contain_NOT|$res;;something went wrong                                                                                           |
|Verify_Contain_OR |$res;;File created successfully                                                                                      |

!|scenario            |Remove File|systemName|            |fileName      |
|Login                |${TPAMURL} |          |${TPAMAdmin}||${DefaultPwd}|
|pause                |10000                                             |
|clickAndWait         |link=Manage Files                                 |
|waitForElementPresent|id=FileNm                                         |
|type;                |id=SystemNm|@systemName                           |
|type;                |id=FileNm  |@fileName                             |
|click                |id=Listing                                        |
|waitForElementPresent|//td[contains(text(),'@fileName')]                |
|mouseDown            |//td[contains(text(),'@fileName')]                |
|click                |//td[contains(text(),'@fileName')]                |
|click                |id=Delete                                         |
|getConfirmation                                                         |
|waitForTextPresent   |@fileName has been successfully deleted           |
