!define usrType1 {UserAdmin}
!define usrType2 {Auditor}
!define usrType3 {Admin}

!include -c <AutoTestsWebDrv.PowerShellNetApiScenarios.ScenarioLibrary
!include -c <PropagateOptionsFromTemplate.ScenarioLibrary

!3 UserAdmin
!4 Create example user, make user template and create a new user from template
!|script                                                                                                          |
|Add User          |${TestUserName}|usertype     |${usrType1}                                                     |
|Make User Template|${TemplateName}|from         |${TestUserName}|retain permissions|false|retain membership|false|
|Create User       |${newUserName} |from template|${TemplateName}                                                 |

!4 Check new user type
!|script                                                                                              |
|List User by filter|-userType ${usrType1} -userName ${newUserName}|and result contains|${newUserName}|

!4 Delete users
!|script                             |
|Delete User         |${TestUserName}|
|Delete User         |${newUserName} |
|Delete User Template|${TemplateName}|

!3 Auditor
!4 Create example user, make user template and create a new user from template
!|script                                                                                                          |
|Add User          |${TestUserName}|usertype     |${usrType2}                                                     |
|Make User Template|${TemplateName}|from         |${TestUserName}|retain permissions|false|retain membership|false|
|Create User       |${newUserName} |from template|${TemplateName}                                                 |

!4 Check new user type
!|script                                                                                              |
|List User by filter|-userType ${usrType2} -userName ${newUserName}|and result contains|${newUserName}|

!4 Delete users
!|script                             |
|Delete User         |${TestUserName}|
|Delete User         |${newUserName} |
|Delete User Template|${TemplateName}|

!3 Admin
!4 Create example user, make user template and create a new user from template
!|script                                                                                                          |
|Add User          |${TestUserName}|usertype     |${usrType3}                                                     |
|Make User Template|${TemplateName}|from         |${TestUserName}|retain permissions|false|retain membership|false|
|Create User       |${newUserName} |from template|${TemplateName}                                                 |

!4 Check new user type
!|script                                                                                              |
|List User by filter|-userType ${usrType3} -userName ${newUserName}|and result contains|${newUserName}|

!4 Delete users
!note TearDown will delete all users.
