!define ManagedAccount {${prefix}psAcnt}
!include -c <AutomatedTesting.ScenarioLibrary
!include -c <PowerShellNetApiScenarios.ScenarioLibrary

!|script                                                                                          |
|Create Account on System                                                                         |
|Add System                                                                                       |
|Test System             |${TestSystemSuccessful}                                                 |
|Add account             |${ManagedAccount}|with password|${ManagedAccountPwdNew}                 |
|Check Password          |${CheckPasswordNotMatch}                                                |
|pause                   |${RestoreFunctAcctPasswordTimeout}                                      |
|Check Password          |${CheckPasswordSuccessful}                                              |
|Reset Password          |${ResetPasswordSuccessful}                                              |
|Schedule Reset Password |${CheckPasswordSuccessful}                                              |
|Set Permissions         |"PPM Requestor"  |on  account  |${ManagedAccount}|for user|${API_user_1}|
|Set Permissions         |"PPM Approver"   |on  account  |${ManagedAccount}|for user|${API_user_2}|
|pause                   |${ApplyNewPoliciesInterval}                                             |
|Request Pwd by          |${API_user_1}                                                           |
|Approve Pwd by          |${API_user_2}                                                           |
|Get Login                                                                                        |
|Delete Account on System|${ManagedAccount}                                                       |
|Delete Account          |${ManagedAccount}                                                       |
|Delete System           |${SystemName}                                                           |
