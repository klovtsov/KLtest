!*> Some notes
This option is available for SSH - Automatic Login Using Password, RDP - Automatic Login Using Password, RDP Through SSH - Automatic Login Using Password. 
*!

!3 Warning! Account and domain names are used in expected images. So do not change it or you should be change the expected images.

!note Active Directory settings
!define AdSystemName {${prefix}_testad}
!define AdSystemPlatform {Windows Active Dir}
!define AdSystemAddress {10.30.38.37}
!define DomainName {pritchet.spb.qsft}
!define NETBIOSDomainName {pritchet}
!define FunctAcct {yasek}
!define FunctAcctPwd {*7utinaa}

!note Linux host settings
!define SystemAddress {10.30.46.188}
!define SystemName {${prefix}_adlin}
!define SystemPlatform {Linux} 
!define ManagedAccount {Peter}
!define ManagedAccountPwd {T0PsecReT}

!note other Setting
!define psmProfileName {${prefix}PsmProf}
!define PsmProxy {SSH - Automatic Login Using Password}
!define upnExpectedImage {psmExpectedUpnLogin.png}
!define domExpectedImage {psmExpectedDomainLogin.png}

!*> Include section
!include -c <AutoTestsWebDrv.ScenarioLibrary
!include -c <AutoTestsWebDrv.CliScenarios.ScenarioLibrary
!include -c <AutoTestsWebDrv.FileTransfer.ScenarioLibrary
!include -c <PsmSmokeTest.ScenarioLibrary
!include -c >TestSpecific
*!

!* Test  Setup
!|script                                                                                                        |
|Create PSM connection profile|${psmProfileName}|domain format                  |domain\account                 |
|Create account on AD system  |${ManagedAccount}|with password                  |${ManagedAccountPwd}           |
|Add Active Directory system                                                                                    |
|Add system                                                                                                     |
|Create domain account        |${ManagedAccount}|with password                  |${ManagedAccountPwd}           |
|Create PSM account           |${ManagedAccount}|authenticated by domain account|${DomainName}\${ManagedAccount}|
|Set User Permissions         |${CLI_user_1}                                                                    |
|Set User Permissions         |${TPAMAdmin}                                                                     |
|Add Session Request                                                                                            |
*!

!|script                                                          |
|Show Desktop                                                     |
|Open session check prompt|${upnExpectedImage}                    |
|Change PSM rofile to     |${psmProfileName}|for|${ManagedAccount}|
|Open session check prompt|${domExpectedImage}                    |
|Change PSM rofile to     |Standard         |for|${ManagedAccount}|


!* Clean Environment
!|script                                                              |
|Cancel Session Request                                               |
|Delete PSM connection profile|${psmProfileName}                      |
|Remove system                |${SystemName}                          |
|Remove system                |${AdSystemName}                        |
|Delete Account on AD System  |${ManagedAccount}                      |
*!
