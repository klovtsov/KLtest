!define ManagedAccount {${prefix}psAcnt}
!include -c <PowerShellNetApiScenarios.ScenarioLibrary

!3 systemAutoFlag set N. The account auto flags may only be N (none) or M (Manual).
!|script                                                                                                                                                                                                                                                                |
|Add system             |${SystemName}                                                                                   |with address|${SystemAddress}|platform    |${SystemPlatform}|managed by |${FunctAcct}      |additional parameters      |-SystemAutoFlag N     |
|Add account            |${ManagedAccount}                                                                               |on system   |${SystemName}   |with options|-AutoFlag N                                                                                        |
|Add account            |${ManagedAccount}2                                                                              |on system   |${SystemName}   |with options|-AutoFlag M                                                                                        |
|Try to Add account     |${ManagedAccount}3                                                                              |on system   |${SystemName}   |with options|-AutoFlag Y      |with result|Since the system isn't auto managed the account can't be auto managed|
|List Accounts by filter|-systemName ${SystemName} -AccountName ${ManagedAccount} -propsToList accountname,accountAutoFl |contains    |${ManagedAccount}.*N                                                                                                             |
|List Accounts by filter|-systemName ${SystemName} -AccountName ${ManagedAccount}2 -propsToList accountname,accountAutoFl|contains    |${ManagedAccount}.*M                                                                                                             |

!3 systemAutoFlag set Y. The account auto flags may only be N,M,Y.
!|script                                                                                                                                                                        |
|Update System          |${SystemName}                                                                                   |         |-SystemAutoFlag Y|by user     |${API_user_1}|
|Add account            |${ManagedAccount}4                                                                              |on system|${SystemName}    |with options|-AutoFlag N  |
|Add account            |${ManagedAccount}5                                                                              |on system|${SystemName}    |with options|-AutoFlag M  |
|Add account            |${ManagedAccount}6                                                                              |on system|${SystemName}    |with options|-AutoFlag Y  |
|List Accounts by filter|-systemName ${SystemName} -AccountName ${ManagedAccount}4 -propsToList accountname,accountAutoFl|contains |${ManagedAccount}.*N                        |
|List Accounts by filter|-systemName ${SystemName} -AccountName ${ManagedAccount}5 -propsToList accountname,accountAutoFl|contains |${ManagedAccount}.*M                        |
|List Accounts by filter|-systemName ${SystemName} -AccountName ${ManagedAccount}6 -propsToList accountname,accountAutoFl|contains |${ManagedAccount}.*Y                        |
|Delete System          |${SystemName}                                                                                                                                          |
