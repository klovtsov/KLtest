!define accountLockedMessage {The account is currently locked and must be unlocked before the password can be}
!define pwdRetrieveFailedMessage {The account is locked.*Password cannot be retrieved at this time}
!include -c <AutomatedTesting.ScenarioLibrary
!include -c <AutomatedTesting.CliScenarios.ScenarioLibrary
!include -c ScenarioLibrary

!|script                                                                    |
|Open                    |${TPAMURL}       ||${TPAMAdmin}  | |${DefaultPwd} |
|Set Account is Locked                                                      |
|Reset Password          |${ManagedAccount}||${accountLockedMessage} reset  |
|Check Password          |${ManagedAccount}||${accountLockedMessage} checked|
|Request Pwd                                                                |
|Approve Pwd                                                                |
|Retrieve Pwd with result|${pwdRetrieveFailedMessage}                       |
|Set Account is Unlocked                                                    |
|Retrieve Pwd with result|${ManagedAccountPwd}                              |
|Reset Password          |${ManagedAccount}||${ResetPasswordSuccessful}     |
|Check Password          |${ManagedAccount}||${CheckPasswordSuccessful}     |
|Cancel Request                                                             |
