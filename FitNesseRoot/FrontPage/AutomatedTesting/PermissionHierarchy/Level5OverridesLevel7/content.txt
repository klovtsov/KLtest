!* Test description
A group has permission for an system and for an account from this system.
Permission on account should have a precedence
*!

!define GroupName {${prefix}grp}

!define OverlappedPolicy {\"PPM Requestor\"}
!define lowLevelType {system}
!define lowLevelObjectName {${SystemName}}
!define lowLevelSubjectType {group}
!define lowLevelSubjectName {${GroupName}}

!define OverlappingPolicy {\"PPM Approver\"}
!define upLevelType {account}
!define upLevelObjectName {${ManagedAccount}}
!define upLevelSubjectType {group}
!define upLevelSubjectName {${GroupName}}

!*> Include section
!include -c <AutomatedTesting.ScenarioLibrary
!include -c <AutomatedTesting.EmailScenarios.ScenarioLibrary
!include -c <AutomatedTesting.CliScenarios.ScenarioLibrary
!include -c ScenarioLibrary
*!
!*> Create Environment
!|script                                                                             |
|Add Group        |${GroupName}                                                      |
|Add User To Group|${CLI_user_2}    |             |${GroupName}                      |
|Add system                                                                          |
|Add account      |${ManagedAccount}|with password|${ManagedAccountPwd}||${NotFailed}|
*!
!|script  |
|Main test|
!*> Clean environment
!|script                         |
|Remove account|${ManagedAccount}|
|Remove system |${SystemName}    |
|Delete Group  |${GroupName}     |
*!