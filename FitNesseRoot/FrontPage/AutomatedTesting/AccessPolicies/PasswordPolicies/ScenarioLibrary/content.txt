!| scenario|Prepare Environment|
|Set Permissions               |

!| scenario|Clear Environment|
|Remove Permissions          |


!| scenario                            |Set Permissions                                                                   |
|Set Group Permissions Account Level   |${GroupAccountRequestors}   ||\"${PasswordRequestorPolicy}\"                      |
|Set Group Permissions Account Level   |${GroupAccountApprovers}    ||\"${PasswordApproverPolicy}\"                       |
|Set Group Permissions Account Level   |${GroupAccountReviewers}    ||\"${PasswordReviewerPolicy}\"                       |
|Set Group Permissions Account Level   |${GroupAccountIsas}         ||\"${PasswordIsaPolicy}\"                            |
|Set Group Permissions Account Level   |${GroupAccountPacs}         ||\"${PasswordPacPolicy}\"                            |
|Set Group Permissions System Level    |${GroupSystemRequestors}    ||\"${PasswordRequestorPolicy}\"                      |
|Set Group Permissions System Level    |${GroupSystemApprovers}     ||\"${PasswordApproverPolicy}\"                       |
|Set Group Permissions System Level    |${GroupSystemReviewers}     ||\"${PasswordReviewerPolicy}\"                       |
|Set Group Permissions System Level    |${GroupSystemIsas}          ||\"${PasswordIsaPolicy}\"                            |
|Set Group Permissions System Level    |${GroupSystemPacs}          ||\"${PasswordPacPolicy}\"                            |
|Set Group Permissions Collection Level|${GroupCollectionRequestors}||\"${PasswordRequestorPolicy}\"||${AccountCollection}|
|Set Group Permissions Collection Level|${GroupCollectionApprovers} ||\"${PasswordApproverPolicy}\" ||${AccountCollection}|
|Set Group Permissions Collection Level|${GroupCollectionReviewers} ||\"${PasswordReviewerPolicy}\" ||${AccountCollection}|
|Set Group Permissions Collection Level|${GroupCollectionIsas}      ||\"${PasswordIsaPolicy}\"      ||${AccountCollection}|
|Set Group Permissions Collection Level|${GroupCollectionPacs}      ||\"${PasswordPacPolicy}\"      ||${AccountCollection}|
|Set User Permissions Account Level    |${UserAccountRequestor}     ||\"${PasswordRequestorPolicy}\"                      |
|Set User Permissions Account Level    |${UserAccountApprover}      ||\"${PasswordApproverPolicy}\"                       |
|Set User Permissions Account Level    |${UserAccountReviewer}      ||\"${PasswordReviewerPolicy}\"                       |
|Set User Permissions Account Level    |${UserAccountIsa}           ||\"${PasswordIsaPolicy}\"                            |
|Set User Permissions Account Level    |${UserAccountPac}           ||\"${PasswordPacPolicy}\"                            |
|Set User Permissions System Level     |${UserSystemRequestor}      ||\"${PasswordRequestorPolicy}\"                      |
|Set User Permissions System Level     |${UserSystemApprover}       ||\"${PasswordApproverPolicy}\"                       |
|Set User Permissions System Level     |${UserSystemReviewer}       ||\"${PasswordReviewerPolicy}\"                       |
|Set User Permissions System Level     |${UserSystemIsa}            ||\"${PasswordIsaPolicy}\"                            |
|Set User Permissions System Level     |${UserSystemPac}            ||\"${PasswordPacPolicy}\"                            |
|Set User Permissions Collection Level |${UserCollectionRequestor}  ||\"${PasswordRequestorPolicy}\"||${SystemCollection} |
|Set User Permissions Collection Level |${UserCollectionApprover}   ||\"${PasswordApproverPolicy}\" ||${SystemCollection} |
|Set User Permissions Collection Level |${UserCollectionReviewer}   ||\"${PasswordReviewerPolicy}\" ||${SystemCollection} |
|Set User Permissions Collection Level |${UserCollectionIsa}        ||\"${PasswordIsaPolicy}\"      ||${SystemCollection} |
|Set User Permissions Collection Level |${UserCollectionPac}        ||\"${PasswordPacPolicy}\"      ||${SystemCollection} |
|Set User Permissions On Fake Account  |${UserWithoutPermissions}   ||\"${PasswordRequestorPolicy}\"                      |
|pause                                 |${ApplyNewPoliciesInterval}                                                       |



!| scenario                             |Remove Permissions                                                                |
|Remove Group Permissions On Account    |${GroupAccountRequestors}   ||\"${PasswordRequestorPolicy}\"                      |
|Remove Group Permissions On Account    |${GroupAccountApprovers}    ||\"${PasswordApproverPolicy}\"                       |
|Remove Group Permissions On Account    |${GroupAccountReviewers}    ||\"${PasswordReviewerPolicy}\"                       |
|Remove Group Permissions On Account    |${GroupAccountIsas}         ||\"${PasswordIsaPolicy}\"                            |
|Remove Group Permissions On Account    |${GroupAccountPacs}         ||\"${PasswordPacPolicy}\"                            |
|Remove Group Permissions On System     |${GroupSystemRequestors}    ||\"${PasswordRequestorPolicy}\"                      |
|Remove Group Permissions On System     |${GroupSystemApprovers}     ||\"${PasswordApproverPolicy}\"                       |
|Remove Group Permissions On System     |${GroupSystemReviewers}     ||\"${PasswordReviewerPolicy}\"                       |
|Remove Group Permissions On System     |${GroupSystemIsas}          ||\"${PasswordIsaPolicy}\"                            |
|Remove Group Permissions On System     |${GroupSystemPacs}          ||\"${PasswordPacPolicy}\"                            |
|Remove Group Permissions On Collection |${GroupCollectionRequestors}||\"${PasswordRequestorPolicy}\"||${AccountCollection}|
|Remove Group Permissions On Collection |${GroupCollectionApprovers} ||\"${PasswordApproverPolicy}\" ||${AccountCollection}|
|Remove Group Permissions On Collection |${GroupCollectionReviewers} ||\"${PasswordReviewerPolicy}\" ||${AccountCollection}|
|Remove Group Permissions On Collection |${GroupCollectionIsas}      ||\"${PasswordIsaPolicy}\"      ||${AccountCollection}|
|Remove Group Permissions On Collection |${GroupCollectionPacs}      ||\"${PasswordPacPolicy}\"      ||${AccountCollection}|
|Remove User Permissions On Account     |${UserAccountRequestor}     ||\"${PasswordRequestorPolicy}\"                      |
|Remove User Permissions On Account     |${UserAccountReviewer}      ||\"${PasswordReviewerPolicy}\"                       |
|Remove User Permissions On Account     |${UserAccountApprover}      ||\"${PasswordApproverPolicy}\"                       |
|Remove User Permissions On Account     |${UserAccountIsa}           ||\"${PasswordIsaPolicy}\"                            |
|Remove User Permissions On Account     |${UserAccountPac}           ||\"${PasswordPacPolicy}\"                            |
|Remove User Permissions On System      |${UserSystemRequestor}      ||\"${PasswordRequestorPolicy}\"                      |
|Remove User Permissions On System      |${UserSystemApprover}       ||\"${PasswordApproverPolicy}\"                       |
|Remove User Permissions On System      |${UserSystemReviewer}       ||\"${PasswordReviewerPolicy}\"                       |
|Remove User Permissions On System      |${UserSystemIsa}            ||\"${PasswordIsaPolicy}\"                            |
|Remove User Permissions On System      |${UserSystemPac}            ||\"${PasswordPacPolicy}\"                            |
|Remove User Permissions On Collection  |${UserCollectionRequestor}  ||\"${PasswordRequestorPolicy}\"||${SystemCollection} |
|Remove User Permissions On Collection  |${UserCollectionApprover}   ||\"${PasswordApproverPolicy}\" ||${SystemCollection} |
|Remove User Permissions On Collection  |${UserCollectionReviewer}   ||\"${PasswordReviewerPolicy}\" ||${SystemCollection} |
|Remove User Permissions On Collection  |${UserCollectionIsa}        ||\"${PasswordIsaPolicy}\"      ||${SystemCollection} |
|Remove User Permissions On Collection  |${UserCollectionPac}        ||\"${PasswordPacPolicy}\"      ||${SystemCollection} |
|Remove User Permissions On Fake Account|${UserWithoutPermissions}   ||\"${PasswordRequestorPolicy}\"                      |





!|scenario              |Password Access Approved|Requestor||Approver||Reviewer|
|$Requestor=            |getEval                 |"@Requestor"                 |
|$Approver=             |getEval                 |"@Approver"                  |
|$Reviewer=             |getEval                 |"@Reviewer"                  |
|Request Password       |$Requestor                                            |
|Approve Password       |$Approver                                             |
|pause                  |15000                                                 |
|Get Login              |$Requestor                                            |
|Cancel Password Request|$Requestor                                            |
|Review Password        |$Reviewer                                             |




!|scenario              |Password Access Privileged|privUser   |
|$Requestor=            |getEval                   |"@privUser"|
|Request Password       |$Requestor                            |
|pause                  |15000                                 |
|Get Login              |$Requestor                            |
|Cancel Password Request|$Requestor                            |
|Review Password        |${Auditor}                            |


!|scenario                  |Password Access ISA|isaUser                        |
|Get Login ISA              |@isaUser                                           |
|pause                      |1000000                                            |
|Complete ISA Release Review|${Auditor}         |       |${ManagedAccount}      |
|Choose Account             |${ManagedAccount}                                  |
|click                      |id=Details                                         |
|waitForElementPresent      |id=AcctDesc                                        |
|$UniqueDesc=               |getEval            |var d = new Date();d.getTime();|
|type;                      |id=AcctDesc        |new description $UniqueDesc    |
|click                      |id=SubmitChangesButton                             |
|waitForTextPresent         |Changes saved successfully                         |
|Reset Password             |successfully                                       |


!|scenario        |Complete ISA Release Review|reviewerName                              |                             |accountName                             |
|$res=            |GroovyWebDriver            |CompleteISAReleaseReview;${TPAMHost};@reviewerName;${UserPwd};@accountName;This review completed by @reviewerName|
|Verify_Contain_OR|$res;;Review completed                                                                                                                       |
|Verify_Contain_OR|$res;;This review completed by @reviewerName                                                                                                 |




!|scenario                                   |Password Access Denied|deniedUser|           |restrictedObject|
|Login                                       |${TPAMURL}            |          |@deniedUser|   |${UserPwd}  |
|pause                                       |10000                                                         |
|clickAndWait                                |link=Add Password Request                                     |
|waitForElementPresent                       |id=AccountNm                                                  |
|type;                                       |id=SystemNm           |${SystemName}                          |
|type;                                       |id=AccountNm          |${ManagedAccount}                      |
|click                                       |id=Accounts                                                   |
|pause                                       |5000                                                          |
|$Where=                                     |getText               |//table[@id='accountsTable']           |
|Verify_Contain_OR                           |$Where;;${ManagedAccount}                                     |
|Logout                                                                                                     |
|Set User Permissions @restrictedObject Level|@deniedUser           |          |\"${PasswordDeniedPolicy}\" |
|pause                                       |${ApplyNewPoliciesInterval}                                   |
|Login                                       |${TPAMURL}            |          |@deniedUser|   |${UserPwd}  |
|pause                                       |10000                                                         |
|clickAndWait                                |link=Add Password Request                                     |
|waitForElementPresent                       |id=AccountNm                                                  |
|type;                                       |id=SystemNm           |${SystemName}                          |
|type;                                       |id=AccountNm          |${ManagedAccount}                      |
|click                                       |id=Accounts                                                   |
|pause                                       |5000                                                          |
|$Where=                                     |getText               |//table[@id='accountsTable']           |
|Verify_Contain_NOT                          |$Where;;${ManagedAccount}                                     |
|Remove User Permissions On @restrictedObject|@deniedUser           |          |\"${PasswordDeniedPolicy}\" |
|pause                                       |${ApplyNewPoliciesInterval}                                   |


!|scenario                            |Password Access Denied on Collection Level|deniedUser|                           |collectionName  |
|Login                                |${TPAMURL}                                |          |@deniedUser                ||${UserPwd}     |
|pause                                |10000                                                                                             |
|clickAndWait                         |link=Add Password Request                                                                         |
|waitForElementPresent                |id=AccountNm                                                                                      |
|type;                                |id=SystemNm                               |${SystemName}                                          |
|type;                                |id=AccountNm                              |${ManagedAccount}                                      |
|click                                |id=Accounts                                                                                       |
|pause                                |5000                                                                                              |
|$Where=                              |getText                                   |//table[@id='accountsTable']                           |
|Verify_Contain_OR                    |$Where;;${ManagedAccount}                                                                         |
|Logout                                                                                                                                  |
|Set User Permissions Collection Level|@deniedUser                               |          |\"${PasswordDeniedPolicy}\"||@collectionName|
|pause                                |${ApplyNewPoliciesInterval}                                                                       |
|Login                                |${TPAMURL}                                |          |@deniedUser                ||${UserPwd}     |
|pause                                |10000                                                                                             |
|clickAndWait                         |link=Add Password Request                                                                         |
|waitForElementPresent                |id=AccountNm                                                                                      |
|type;                                |id=SystemNm                               |${SystemName}                                          |
|type;                                |id=AccountNm                              |${ManagedAccount}                                      |
|click                                |id=Accounts                                                                                       |
|pause                                |5000                                                                                              |
|$Where=                              |getText                                   |//table[@id='accountsTable']                           |
|Verify_Contain_NOT                   |$Where;;${ManagedAccount}                                                                         |
|Remove User Permissions On Collection|@deniedUser                               |          |\"${PasswordDeniedPolicy}\"||@collectionName|
|pause                                |${ApplyNewPoliciesInterval}                                                                       |


!|scenario                                |Password Access Without Permissions|deniedUser|             |allowedObject   |
|Login                                    |${TPAMURL}                         |          |@deniedUser  |   |${UserPwd}  |
|pause                                    |10000                                                                        |
|clickAndWait                             |link=Add Password Request                                                    |
|waitForElementPresent                    |id=AccountNm                                                                 |
|type;                                    |id=SystemNm                        |${SystemName}                            |
|type;                                    |id=AccountNm                       |${ManagedAccount}                        |
|click                                    |id=Accounts                                                                  |
|pause                                    |5000                                                                         |
|$Where=                                  |getText                            |//table[@id='accountsTable']             |
|Verify_Contain_NOT                       |$Where;;${ManagedAccount}                                                    |
|Logout                                                                                                                 |
|Set User Permissions @allowedObject Level|@deniedUser                        |          |\"${PasswordRequestorPolicy}\"|
|pause                                    |${ApplyNewPoliciesInterval}                                                  |
|Login                                    |${TPAMURL}                         |          |@deniedUser  |   |${UserPwd}  |
|pause                                    |10000                                                                        |
|clickAndWait                             |link=Add Password Request                                                    |
|waitForElementPresent                    |id=AccountNm                                                                 |
|type;                                    |id=SystemNm                        |${SystemName}                            |
|type;                                    |id=AccountNm                       |${ManagedAccount}                        |
|click                                    |id=Accounts                                                                  |
|pause                                    |5000                                                                         |
|$Where=                                  |getText                            |//table[@id='accountsTable']             |
|Verify_Contain_OR                        |$Where;;${ManagedAccount}                                                    |
|Remove User Permissions On @allowedObject|@deniedUser                        |          |\"${PasswordRequestorPolicy}\"|
|pause                                    |${ApplyNewPoliciesInterval}                                                  |


############################################

!| scenario        |Request Password |requestorName                                                                                                                                        |
|pause             |30000                                                                                                                                                                  |
|Login             |${TPAMURL}       |                               |@requestorName                               |                              |${UserPwd}                              |
|pause             |10000                                                                                                                                                                  |
|clickAndWait      |link=Add Password Request                                                                                                                                              |
|type;             |id=SystemNm      |${SystemName}                                                                                                                                        |
|type;             |id=AccountNm     |${ManagedAccount}                                                                                                                                    |
|click             |id=Accounts      |                                                                                                                                                     |
|click             |//input[@type='checkbox']                                                                                                                                              |
|click             |id=Details                                                                                                                                                             |
|select;           |id=DurationHrs   |label=0                                                                                                                                              |
|select;           |id=DurationQtrHrs|label=15                                                                                                                                             |
|type;             |id=RequestReason |password request                                                                                                                                     |
|typeKeys;         |id=RequestReason |reason                                                                                                                                               |
|click             |id=SubmitChanges                                                                                                                                                       |
|waitForTextPresent|*RequestID:*has been submitted.*                                                                                                                                       |
|$res=             |getText          |//div[@id='ResultsDiv']                                                                                                                              |
|$RequestID=       |getEval          |var rstr = "RequestID: ";var i1 = "$res".indexOf(rstr);var i2 = "$res".substring(i1 + rstr.length);var i3 = i2.indexOf(" ");i4 = i2.substring (0,i3);|


!| scenario           |Approve Password  |approverName              |
|pause                |30000                                        |
|Login                |${TPAMURL}        ||@approverName||${UserPwd}|
|pause                |10000                                        |
|click                |id=Approvals                                 |
|waitForElementPresent|link=Pwd(${ManagedAccount})                  |
|clickAndWait         |link=Pwd(${ManagedAccount})                  |
|waitForElementPresent|//td[contains(text(),'${ManagedAccount}')]   |
|mouseDown            |//td[contains(text(),'${ManagedAccount}')]   |
|click                |//td[contains(text(),'${ManagedAccount}')]   |
|click                |id=Details                                   |
|type;                |id=ResponseComment|ok to approve             |
|typeKeys;            |id=ResponseComment|a                         |
|click                |id=ApproveReq                                |
|waitForTextPresent   |*The response* was submitted successfully*   |


!|scenario            |Review Password    |reviewerName              |
|Login                |${TPAMURL}         ||@reviewerName||${UserPwd}|
|pause                |10000                                         |
|click                |id=PendingReviews                             |
|waitForElementPresent|link=$RequestID                               |
|clickAndWait         |link=$RequestID                               |
|waitForElementPresent|id=NewReviewComment|                          |
|type;                |id=NewReviewComment|I saw it                  |
|pause                |2000                                          |
|click                |id=CompleteReviewButton                       |
|waitForTextPresent   |Saved Successfully*                           |



!| scenario           |Cancel Password Request |requestorName                  |
|pause                |30000                                                   |
|Login                |${TPAMURL}              | |@requestorName | |${UserPwd} |
|pause                |10000                                                   |
|click                |id=CurrentRequests      |                               |
|waitForElementPresent|//table[@id='requestsTable']//tr[contains(@id,'P')]/td/a|
|clickAndWait         |//table[@id='requestsTable']//tr[contains(@id,'P')]/td/a|
|waitForElementPresent|id=Details                                              |
|type;                |id=ResponseComment      |Decline                        |
|typeKeys;            |id=ResponseComment      |a                              |
|click                |id=SubmitChanges                                        |
|waitForTextPresent   |*The response* was submitted successfully*              |



!| scenario             |Get Login                      |requestorName                                                                    |
|Login                  |${TPAMURL}                     |              |@requestorName              |             |${UserPwd}             |
|click                  |id=CurrentRequests             |                                                                                 |
|waitForElementPresent  |//td[contains(text(),'${SystemName}')]/../td/a[contains(text(),'${ManagedAccount}')]                             |
|click                  |//td[contains(text(),'${SystemName}')]/../td/a[contains(text(),'${ManagedAccount}')]                             |
|waitForElementPresent  |//table[@id='MainListingTable']//td[contains(text(),'${SystemName}')]/../td[contains(text(),'${ManagedAccount}')]|
|mouseDown              |//table[@id='MainListingTable']//td[contains(text(),'${SystemName}')]/../td[contains(text(),'${ManagedAccount}')]|
|click                  |//table[@id='MainListingTable']//td[contains(text(),'${SystemName}')]/../td[contains(text(),'${ManagedAccount}')]|
|click                  |id=Password                                                                                                      |
|pause                  |5000                                                                                                             |
|waitForElementPresent  |//div[@class='displayPassword']                                                                                  |
|$passwordstr=          |getText                        |//div[@class='displayPassword']                                                  |
|$GeneratedPwd=         |get_password                   |$passwordstr                                                                     |
|Login Account to System|$GeneratedPwd                                                                                                    |


!| scenario             |Get Login ISA         |requestorName                         |
|Login                  |${TPAMURL}            |   |@requestorName   |   |${UserPwd}  |
|clickAndWait           |link=Manage Accounts                                         |
|type;                  |id=SystemNm           |${SystemName}                         |
|type;                  |id=AccountNm          |${ManagedAccount}                     |
|click                  |id=Listing                                                   |
|waitForElementPresent  |//table[@id='AccountListing']//td[text()='${ManagedAccount}']|
|mouseDown              |//table[@id='AccountListing']//td[text()='${ManagedAccount}']|
|click                  |//table[@id='AccountListing']//td[text()='${ManagedAccount}']|
|waitForElementPresent  |id=Passwords                                                 |
|click                  |id=Passwords                                                 |
|type;                  |id=ReleaseReasonText  |show me the password                  |
|typeKeys;              |id=ReleaseReasonText  |show me the password                  |
|click                  |id=Password                                                  |
|pause                  |5000                                                         |
|waitForElementPresent  |//div[@class='displayPassword']                              |
|$passwordstr=          |getText               |//div[@class='displayPassword']       |
|$GeneratedPwd=         |get_password          |$passwordstr                          |
|Login Account to System|$GeneratedPwd                                                |




!|scenario         |Set Min Approve number|appruveNumber      |
|click             |id=Details            |                   |
|type;             |id=MinApprovers       |@appruveNumber     |
|type;             |id=AcctDesc           |Set approvers count|
|click             |id=SubmitChangesButton|                   |
|waitForTextPresent|Changes saved successfully for            |



!|scenario         |Set Manual Management         |
|click             |id=Details                    |
|click             |id=pwdMgmtManual              |
|click             |id=SubmitChangesButton        |
|waitForTextPresent|Changes saved successfully for|

!|scenario         |Set Auto Management           |
|click             |id=Details                    |
|click             |id=pwdMgmtAuto                |
|typeKeys;         |id=AcctDesc         |a        |
|click             |id=SubmitChangesButton        |
|waitForTextPresent|Changes saved successfully for|




!|scenario         |Schedule Reset Password|testResult                                                                                                                                     |
|click             |id=Details                                                                                                                                                             |
|click             |id=Management                                                                                                                                                          |
|$Hours=           |getEval                |var d = new Date();d.setUTCMinutes(d.getUTCMinutes()+3);var s = d.getUTCHours();if ((s + "").length == 1) s = "0" + s;else d.getUTCHours();    |
|$Minutes=         |getEval                |var d = new Date();d.setUTCMinutes(d.getUTCMinutes()+3);var s = d.getUTCMinutes();if ((s + "").length == 1) s = "0" + s;else d.getUTCMinutes();|
|$Months=          |getEval                |var d = new Date();d.setUTCMinutes(d.getUTCMinutes()+3);var s = d.getUTCMonth()+1;if ((s + "").length == 1) s = "0" + s;else d.getUTCMonth()+1;|
|$Days=            |getEval                |var d = new Date();d.setUTCMinutes(d.getUTCMinutes()+3);var s = d.getUTCDate();if ((s + "").length == 1) s = "0" + s;else d.getUTCDate();      |
|$Years=           |getEval                |var d = new Date();d.setUTCMinutes(d.getUTCMinutes()+3);d.getUTCFullYear();                                                                    |
|type;             |id=Hr                  |$Hours                                                                                                                                         |
|typeKeys;         |id=Hr                  |$Hours                                                                                                                                         |
|type;             |id=Min                 |$Minutes                                                                                                                                       |
|type;             |id=Mon                 |$Months                                                                                                                                        |
|type;             |id=DayNumber           |$Days                                                                                                                                          |
|type;             |id=YearNumber          |$Years                                                                                                                                         |
|click             |id=Information         |                                                                                                                                               |
|type;             |id=RelNotifyEmail      |${AccountEMail}                                                                                                                                |
|type;             |id=RelNotifyEmail      |                                                                                                                                               |
|click             |id=SubmitChangesButton |                                                                                                                                               |
|waitForTextPresent|*Changes saved successfully for*                                                                                                                                       |





!|scenario                  |Password Release Request And Responce                                                      |
|Login                      |${TPAMURL}                           ||${TPAMAdmin}                         ||${DefaultPwd}|
|pause                      |20000                                                                                      |
|Choose Account             |${ManagedAccount}                                                                          |
|Set Min Approve number     |${ApproversCount}                                                                          |
|Set Auto Management                                                                                                    |
|Set Min Reviews            |1                                                                                          |
|Request Pwd                |${ManagedAccount}                                                                          |
|pause                      |200000                                                                                     |
|Check Mail                 |${UserAccountRequestorEMail}         ||Release Request Notification         ||$RequestID   |
|Check Approvers Mailboxes  |Release Request Notification         ||$RequestID                                          |
|Approve Pwd                                                                                                            |
|Cancel Request                                                                                                         |
|pause                      |200000                                                                                     |
|Check Mail                 |${SystemEscalationEMail}             ||Release Request Notification         ||$RequestID   |
|Delete Mails               |${SystemEscalationEMail}                                                                   |
|Check Mail                 |${UserAccountRequestorEMail}         ||Release Request Response notification||$RequestID   |
|Check Approvers Mailboxes  |Release Request Response notification||$RequestID                                          |
|Delete Mails               |${UserAccountRequestorEMail}                                                               |
|Clear Approvers Mailboxes                                                                                              |
|Check All Mailboxes No Mail|Release Request Notification         ||$RequestID                                          |
|Check All Mailboxes No Mail|Release Request Response notification||$RequestID                                          |




!|scenario                  |Password Release Review Request                                              |
|Login                      |${TPAMURL}                                      ||${TPAMAdmin}||${DefaultPwd}|
|Choose Account             |${ManagedAccount}                                                            |
|Set Min Approve number     |0                                                                            |
|Set Min Reviews            |1                                                                            |
|Request Pwd                |${ManagedAccount}                                                            |
|Get Login                                                                                                |
|Cancel Request                                                                                           |
|pause                      |200000                                                                       |
|Check Reviewers Mailboxes  |Password Release Review Requirement Notification||$RequestID                 |
|Clear Reviewers Mailboxes                                                                                |
|Check All Mailboxes No Mail|Password Release Review Requirement Notification||$RequestID                 |
|Delete Mails               |${AccountEMail}                                                              |

!|scenario                  |Privileged Password Release                                                                                                                                                                                    |
|Login                      |${TPAMURL}                                     ||${TPAMAdmin}                                   ||${DefaultPwd}                                                                                                |
|Choose Account             |${ManagedAccount}                                                                                                                                                                                              |
|Set Min Approve number     |0                                                                                                                                                                                                              |
|Set Min Reviews            |0                                                                                                                                                                                                              |
|Request Pwd                |${ManagedAccount}                                                                                                                                                                                              |
|Get Login                                                                                                                                                                                                                                  |
|pause                      |200000                                                                                                                                                                                                         |
|Cancel Request                                                                                                                                                                                                                             |
|Check Mail                 |${AccountEMail}                                ||Special Privilege Password Release Notification||password for ${ManagedAccount} on ${SystemName} was retrieved without dual control by ${UserAccountRequestor}|
|Delete Mails               |${AccountEMail}                                                                                                                                                                                                |
|Check All Mailboxes No Mail|Special Privilege Password Release Notification||password for ${ManagedAccount} on ${SystemName} was retrieved without dual control by ${UserAccountRequestor}                                                 |


!|scenario         |Set Min Reviews       |reviewsNumber             |
|click             |id=Reviews            |                          |
|type;             |id=PwdReviewCnt       |@reviewsNumber            |
|type;             |id=PwdEscalationEmail |${ReviewerEscalationEMail}|
|typeKeys;         |id=PwdEscalationEmail |${ReviewerEscalationEMail}|
|click             |id=SubmitChangesButton|                          |
|waitForTextPresent|Changes saved successfully for                   |


!|scenario         |Reset Password              |testResult  |
|click             |id=ResetPassButton                       |
|waitForTextPresent|*Results from the*                       |
|verifyText        |//div[@id='ResultDetailDiv']||@testResult|

!|scenario    |Login Account to System                    |ManPwd                    |
|accountAction|${SystemPlatform};;login;;${SystemAddress};;${ManagedAccount};;@ManPwd|



