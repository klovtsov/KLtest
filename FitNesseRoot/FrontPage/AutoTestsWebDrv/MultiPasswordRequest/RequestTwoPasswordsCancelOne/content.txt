!include -c <AutoTestsWebDrv.PowerShellNetApiScenarios.ScenarioLibrary
!3 Preparing stage
!|script                                                                                                                                                                                          |
|Add system     |${FirstSystemName} |with address|${FirstSystemAddress}|platform     |${FirstSystemPlatform}|managed by|${FirstFunctAcct}|additional parameters|-functAcctPwd ${FirstFunctAcctPwd}|
|Add system     |${SecSystemName}   |with address|${SecSystemAddress}  |platform     |${SecSystemPlatform}  |managed by|${SecFunctAcct}  |additional parameters|-functAcctPwd ${SecFunctAcctPwd}  |
|Add Account    |${FirstManagedAcct}|on          |${FirstSystemName}   |with password|${FirstManagedAcctPwd}                                                                                      |
|Add Account    |${SecManagedAcct}  |on          |${SecSystemName}     |with password|${SecManagedAcctPwd}                                                                                        |
|Set Permissions|"PPM Requestor"    |on system   |${FirstSystemName}   |for user     |${Requestor}                                                                                                |
|Set Permissions|"PPM Requestor"    |on system   |${SecSystemName}     |for user     |${Requestor}                                                                                                |
|Set Permissions|"PPM Approver"     |on system   |${FirstSystemName}   |for user     |${Approver}                                                                                                 |
|Set Permissions|"PPM Approver"     |on system   |${SecSystemName}     |for user     |${Approver}                                                                                                 |
!3 Create multi-account request, cancel only one and try to get password for another
!|script                                                                                                                 |
|Create request for accounts by|${Requestor}       |using filter|${prefix}*                                              |
|Approve multi-request by      |${Approver}                                                                              |
|Cancel multi-request to       |${FirstManagedAcct}|from system |${FirstSystemName}|by              |${Requestor}        |
|Release password for          |${SecManagedAcct}  |by          |${Requestor}      |and compare with|${SecManagedAcctPwd}|

!3 Remove All
!|script                         |
|Delete System|${FirstSystemName}|
|Delete System|${SecSystemName}  |
