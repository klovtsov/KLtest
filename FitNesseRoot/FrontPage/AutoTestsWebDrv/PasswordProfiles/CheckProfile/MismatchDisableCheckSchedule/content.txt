!*> Includes
''System''
!include -c <AutoTestsWebDrv.PlatformsTesting.WindowsLocalHost
''Libraries''
!include -c <AutoTestsWebDrv.UsersTests.UserTypes.ScenarioLibrary
!include -c <PasswordProfiles.ScenarioLibrary
*!

''Mismatch - Disable check schedule''
!note Scheduled Check Password
!|script                                                                                                                                                                                                                                                                               |
|Open                                |${TPAMURL}       ||${TPAMAdmin}                                                                                                                           ||${DefaultPwd}                                                                        |
|Add Account                         |${CLIBatch}      ||--SystemName ${SystemName} --AccountName ${ManagedAccount} --Password "WrongPWD" --PasswordCheckProfile ${CheckProfile3NismatchDisable}||successfully                                                                         |
|pause                               |${defaultPause}                                                                                                                                                                                                                                  |
|Check Test Log                      |${ManagedAccount}||Failed - Password Mismatch                                                                                                                                                                                                    |
|Check Mismatch Mail                 |${MailServer}    ||${SystemEMail}                                                                                                                         ||${SystemEMailPwd}||${FromMail}||${MailSubjectCheckMismatch}||${MailBodyCheckMismatch}|
|Check schedule disabled             |${ManagedAccount}||true                                                                                                                                                                                                                          |
|Check Account Lock Status           |${ManagedAccount}||false                                                                                                                                                                                                                         |
|Management tab                      |${ManagedAccount}                                                                                                                                                                                                                                |
|Check Schedule                      |${DaylySchedule1}                                                                                                                                                                                                                                |
|Check Mismatch Action               |${MismatchDisable}                                                                                                                                                                                                                               |
|Turn off Disable Check Schedule Flag|${ManagedAccount}                                                                                                                                                                                                                                |
|Check schedule disabled             |${ManagedAccount}||false                                                                                                                                                                                                                         |
|Delete Mails                        |${SystemEMail}                                                                                                                                                                                                                                   |

!note Manual Check Password
!|script                                                                                                                                                                                                                                          |
|Check Password                  |${CLIBatch}      ||--SystemName ${SystemName} --AccountName ${ManagedAccount}                                            ||The stored password for ${ManagedAccount} DOES NOT MATCH the managed system          |
|Check Test Log                  |${ManagedAccount}||Failed - Password Mismatch                                                                                                                                                                   |
|pause                           |${defaultPause}                                                                                                                                                                                                 |
|Check schedule disabled         |${ManagedAccount}||true                                                                                                                                                                                         |
|Check Account Lock Status       |${ManagedAccount}||false                                                                                                                                                                                        |
|Check Mismatch Mail             |${MailServer}    ||${SystemEMail}                                                                                        ||${SystemEMailPwd}||${FromMail}||${MailSubjectCheckMismatch}||${MailBodyCheckMismatch}|
|Management tab                  |${ManagedAccount}                                                                                                                                                                                               |
|Check Consecutive Check Failures|0                                                                                                                                                                                                               |
|Update Account                  |${CLIBatch}      ||--SystemName ${SystemName} --AccountName ${ManagedAccount} --PasswordCheckProfile "!NULL" --AutoFlag N||successfully                                                                         |
|Delete Account                  |${CLIBatch}      ||--SystemName ${SystemName}  --AccountName ${ManagedAccount}                                           ||successfully                                                                         |
|Delete Mails                    |${SystemEMail}                                                                                                                                                                                                  |
|stop                                                                                                                                                                                                                                             |
