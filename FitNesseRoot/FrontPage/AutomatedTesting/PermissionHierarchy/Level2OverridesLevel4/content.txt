!* Test description
A user has permissions for a collection of systems and for a collection of accounts.
Permission on collection of accounts should have a precedence
*!

!define CollectionName {${prefix}AccntColtn}
!define CollectionName2 {${prefix}SysColtn}

!define OverlappedPolicy {Requestor}
!define lowLevelType {collection}
!define lowLevelObjectName {${CollectionName}}
!define lowLevelSubjectType {user}
!define lowLevelSubjectName {${CLI_user_2}}

!define OverlappingPolicy {\"PPM Approver\"}
!define upLevelType {collection}
!define upLevelObjectName {${CollectionName2}}
!define upLevelSubjectType {user}
!define upLevelSubjectName {${CLI_user_2}}

!*> Include section
!include -c <AutomatedTesting.ScenarioLibrary
!include -c <AutomatedTesting.EmailScenarios.ScenarioLibrary
!include -c <AutomatedTesting.CliScenarios.ScenarioLibrary
!include -c ScenarioLibrary
*!

!*> Create Environment
!|script                                                                                                                            |
|Add system                                                                                                                         |
|Add Collection           |${CollectionName}                                                                                        |
|Add System To Collection |${SystemName}    |             |${CollectionName}                                                        |
|Add account              |${ManagedAccount}|with password|${ManagedAccountPwd}          |             |${NotFailed}                |
|Add Collection           |${CollectionName2}                                                                                       |
|Add Account To Collection|${SystemName}    |             |${ManagedAccount}             |             |${CollectionName2}          |
*!
!|script  |
|Main test|

!*> Clean environment
!|script                             |
|Remove account   |${ManagedAccount} |
|Remove system    |${SystemName}     |
|Delete Collection|${CollectionName} |
|Delete Collection|${CollectionName2}|
*!