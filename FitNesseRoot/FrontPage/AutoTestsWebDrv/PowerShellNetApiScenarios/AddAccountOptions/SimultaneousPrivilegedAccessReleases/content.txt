!define SuccessfulPwdRequest {has been submitted.*current status is Active/Approved}
!define FailedPwdRequest {is already scheduled for 1 password release}

!include -c <PowerShellNetApiScenarios.ScenarioLibrary

!3 Default behavior: Another user can't make a new request 
!|script                                                                                             |
|Add system                                                                                          |
|Add account          |${ManagedAccount}      |with password|${ManagedAccountPwd}                    |
|Set Permissions      |"PPM Privileged Access"|on  account  |${ManagedAccount}|for user|${API_user_1}|
|Set Permissions      |"PPM Privileged Access"|on  account  |${ManagedAccount}|for user|${API_user_2}|
|Try to Request Pwd by|${API_user_1}          |with result  |${SuccessfulPwdRequest}                 |
|Try to Request Pwd by|${API_user_2}          |with result  |${FailedPwdRequest}                     |
|Delete Account       |${ManagedAccount}                                                             |

!3 Change setting: Another user can make a new request
!|script                                                                                                         |
|Add account          |${ManagedAccount}      |on system  |${SystemName}    |with options|-SimulPrivAccReleases 2|
|Set Permissions      |"PPM Privileged Access"|on  account|${ManagedAccount}|for user    |${API_user_1}          |
|Set Permissions      |"PPM Privileged Access"|on  account|${ManagedAccount}|for user    |${API_user_2}          |
|Try to Request Pwd by|${API_user_1}          |with result|${SuccessfulPwdRequest}                               |
|Try to Request Pwd by|${API_user_2}          |with result|${SuccessfulPwdRequest}                               |
|Delete System        |${SystemName}                                                                             |
