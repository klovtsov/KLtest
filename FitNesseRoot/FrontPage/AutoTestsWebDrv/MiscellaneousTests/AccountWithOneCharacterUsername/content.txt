!*> Variables
!define AccountNameA {A}
!define AccountName1 {1}
!define AccountNameS {@}

!define PathToBatch {${ProjDir}\Scripts\Batch\AccountWithOneCharacterUsername}

!define EthalonFilesPath {${PathToBatch}}
!define DefaultPrefix {prefix}

!define TempAccount {tmpacc}
!define ProfileName {${prefix}OneCharcterTest}
!define TemplateName {${prefix}OneCharcterTest}
*!

''System''
!include -c <AutoTestsWebDrv.PlatformsTesting.WindowsLocalHost
''Libraries''
!include -c >TestSpecific
!include -c <AutoTestsWebDrv.ListOperations.ScenarioLibrary
!include -c <AutoTestsWebDrv.ScenarioLibrary
!include -c <AutoTestsWebDrv.AccountDiscovery.ScenarioLibrary
!include -c <AutoTestsWebDrv.UsersTests.UserTypes.ScenarioLibrary


!*> Prepare
!|script                                                                                                                                                                                                                                                                                                                        |
|Open       |${TPAMURL} ||${TPAMAdmin}                                                                                                                                                                                                                                                                           ||${DefaultPwd}|
|Add System |${CLIBatch}||--SystemName ${SystemName} --PlatformName ${SystemPlatform} --NetworkAddress ${SystemAddress} --FunctionalAccount ${FunctAcct} --FuncAcctCred \"${FunctAcctPwd}\" --PasswordCheckProfile ${PersistentPasswordCheckProfile1} --PasswordChangeProfile ${PersistentPasswordChangeProfile1}||successfully |
|Add Account|${CLIBatch}||--SystemName ${SystemName}  --AccountName ${TempAccount}                                                                                                                                                                                                                               ||successfully |
*!

''Add account via UI.''
!|script                                                       |
|Add Account|${AccountNameA}|with password|${ManagedAccountPwd}|
|Add Account|${AccountName1}|with password|${ManagedAccountPwd}|
|Add Account|${AccountNameS}|with password|${ManagedAccountPwd}|

!*> Cleanup
!|script                                                                                            |
|Delete Account|${CLIBatch}||--SystemName ${SystemName}  --AccountName ${AccountNameA}||successfully|
|Delete Account|${CLIBatch}||--SystemName ${SystemName}  --AccountName ${AccountName1}||successfully|
|Delete Account|${CLIBatch}||--SystemName ${SystemName}  --AccountName ${AccountNameS}||successfully|
*!

''Add account via CLI.''
!|script                                                                                         |
|Add Account|${CLIBatch}||--SystemName ${SystemName}  --AccountName ${AccountNameA}||successfully|
|Add Account|${CLIBatch}||--SystemName ${SystemName}  --AccountName ${AccountName1}||successfully|
|Add Account|${CLIBatch}||--SystemName ${SystemName}  --AccountName ${AccountNameS}||successfully|

!*> Cleanup
!|script                                                                                            |
|Delete Account|${CLIBatch}||--SystemName ${SystemName}  --AccountName ${AccountNameA}||successfully|
|Delete Account|${CLIBatch}||--SystemName ${SystemName}  --AccountName ${AccountName1}||successfully|
|Delete Account|${CLIBatch}||--SystemName ${SystemName}  --AccountName ${AccountNameS}||successfully|
*!

''Add account via API.''
!|script                                                                                              |
|Add Account via api|SystemName=${SystemName};AccountName=${AccountNameA}||${API_user_1}||successfully|
|Add Account via api|SystemName=${SystemName};AccountName=${AccountName1}||${API_user_1}||successfully|
|Add Account via api|SystemName=${SystemName};AccountName=${AccountNameS}||${API_user_1}||successfully|

!*> Cleanup
!|script                                                                                            |
|Delete Account|${CLIBatch}||--SystemName ${SystemName}  --AccountName ${AccountNameA}||successfully|
|Delete Account|${CLIBatch}||--SystemName ${SystemName}  --AccountName ${AccountName1}||successfully|
|Delete Account|${CLIBatch}||--SystemName ${SystemName}  --AccountName ${AccountNameS}||successfully|
*!

''Add account via Batch.''
!|script                            |
|Prefix replacer                    |
|Batch Import Accounts|Accounts||csv|

!*> Cleanup
!|script                                                                                            |
|Delete Account|${CLIBatch}||--SystemName ${SystemName}  --AccountName ${AccountNameA}||successfully|
|Delete Account|${CLIBatch}||--SystemName ${SystemName}  --AccountName ${AccountName1}||successfully|
|Delete Account|${CLIBatch}||--SystemName ${SystemName}  --AccountName ${AccountNameS}||successfully|
*!

''Add account via Account Discovery.''
!define AccountNameS {&}
!define AutoDiscoveryAccounts {${AccountNameA},${AccountName1},${AccountNameS}}
!include -c >TestSpecific

!|script                                                         |
|Create Account on System          |${AccountNameA}              |
|Create Account on System          |${AccountName1}              |
|Create Account on System          |${AccountNameS}              |
|Create Template                                                 |
|Create Account Discovery Profile                                |
|Set AccDiscovery profile to System|${ProfileName}||${SystemName}|
|Run AccDiscovery                                                |


!*> Cleanup
!|script                                                                                                                                          |
|Set AccDiscovery profile to System|No Account Discovery Profile selected||${SystemName}                                                          |
|Delete Account Discovery Profile  |${ProfileName}                                                                                                |
|Delete Account on System          |${AccountNameA}                                                                                               |
|Delete Account on System          |${AccountName1}                                                                                               |
|Delete Account on System          |${AccountNameS}                                                                                               |
|Delete Account                    |${CLIBatch}                          ||--SystemName ${SystemName}  --AccountName ${AccountNameA}||successfully|
|Delete Account                    |${CLIBatch}                          ||--SystemName ${SystemName}  --AccountName ${AccountName1}||successfully|
|Delete Account                    |${CLIBatch}                          ||--SystemName ${SystemName}  --AccountName ${AccountNameS}||successfully|
|Delete System                     |${CLIBatch}                          ||--SystemName ${SystemName}                               ||successfully|
|Remove System                     |${TemplateName}                                                                                               |
|stop                                                                                                                                             |
*!