!include -c <AutoTestsWebDrv.PowerShellNetApiScenarios.ScenarioLibrary
!3 Preparing stage
!|script                                                                                                                                                                                          |
|Add system     |${FirstSystemName} |with address|${FirstSystemAddress}|platform     |${FirstSystemPlatform}|managed by|${FirstFunctAcct}|additional parameters|-functAcctPwd ${FirstFunctAcctPwd}|
|Add system     |${SecSystemName}   |with address|${SecSystemAddress}  |platform     |${SecSystemPlatform}  |managed by|${SecFunctAcct}  |additional parameters|-functAcctPwd ${SecFunctAcctPwd}  |
|Add Account    |${FirstManagedAcct}|on          |${FirstSystemName}   |with password|${FirstManagedAcctPwd}                                                                                      |
|Add Account    |${SecManagedAcct}  |on          |${SecSystemName}     |with password|${SecManagedAcctPwd}                                                                                        |
|Set Permissions|"PPM Requestor"    |on system   |${FirstSystemName}   |for user     |${Requestor}                                                                                                |
|Set Permissions|"PPM Requestor"    |on system   |${SecSystemName}     |for user     |${Requestor}                                                                                                |
|Set Permissions|"PPM Approver"     |on system   |${FirstSystemName}   |for user     |${Approver}                                                                                                 |
|Set Permissions|"PPM Approver"     |on system   |${SecSystemName}     |for user     |${Approver}                                                                                                 |
!3 Create multi-account request, approve only one and try to get both passwords
!|script                                                                                                                                         |
|Create request for accounts by|${Requestor}       |using filter|${prefix}*                                                                      |
|Approve multi-request for     |${FirstManagedAcct}|from system |${FirstSystemName}|by              |${Approver}                                 |
|Release password for          |${FirstManagedAcct}|by          |${Requestor}      |and compare with|${FirstManagedAcctPwd}                      |
|Check that request for        |${SecManagedAcct}  |from system |${SecSystemName}  |has status      |Pending Approval|and|Password tab is disabled|

!3 Remove All
!|script                         |
|Delete System|${FirstSystemName}|
|Delete System|${SecSystemName}  |
