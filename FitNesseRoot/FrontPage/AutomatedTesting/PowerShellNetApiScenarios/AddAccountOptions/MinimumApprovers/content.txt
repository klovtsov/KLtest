!define MinApproversValue {2}

!include -c  <PowerShellNetApiScenarios.ScenarioLibrary

!|script                                                                                                                            |
|Add system       |${SystemName}    |with address|${SystemAddress} |platform    |Linux|additional parameters|-MaxReleaseDuration 150|
|Add account      |${ManagedAccount}|on system   |${SystemName}    |with options|-MinimumApprovers ${MinApproversValue}             |
|Set Permissions  |"PPM Requestor"  |on  account |${ManagedAccount}|for user    |${API_user_1}                                      |
|Set Permissions  |"PPM Approver"   |on  account |${ManagedAccount}|for user    |${API_user_2}                                      |
|Request Pwd by   |${API_user_1}                                                                                                    |
|List Request     |Pending Approval                                                                                                 |
|Approve Pwd by   |${API_user_2}                                                                                                    |
|List Request     |Pending Approval                                                                                                 |
|Cancel Request by|${API_user_1}                                                                                                    |
|Delete System    |${SystemName}                                                                                                    |
