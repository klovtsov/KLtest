!* Test Description
1. Use the account's current password to change the password. Y/N.
2. If the functional account is flagged as “non-privileged” at the system level this value should be set to Y.
*!

!include -c <AutomatedTesting.PlatformsTesting.EdmzSpcwDc2
!define SystemName {${prefix}_psChek}
!define SystemPlatform {Windows Active Dir}
!define ManagedAccount {${prefix}psAcnt}
!include -c <PowerShellNetApiScenarios.ScenarioLibrary

!3 Test 1
!|script                                                                                                                                                                                                                                                                                                                   |
|Add system             |${SystemName}                                                                              |with address|${SystemAddress}|platform    |"${SystemPlatform}"|managed by|${FunctAcct}|additional parameters|-functAcctPwd ${FunctAcctPwd} -domainName ${DomainName} -NetBiosName ${NETBIOSDomainName}|
|Add account            |${ManagedAccount}                                                                          |on system   |${SystemName}   |with options|-UseSelfFlag Y                                                                                                                                             |
|List Accounts by filter|-systemName ${SystemName} -AccountName ${ManagedAccount} -propsToList accountname,useSelfFl|contains    |${ManagedAccount}.*Y                                                                                                                                                                     |
|Delete System          |${SystemName}                                                                                                                                                                                                                                                                                     |

!3 Test 2
!|script                                                                                                                                                                                                                                                                                                                                      |
|Add system             |${SystemName}                                                                              |with address|${SystemAddress}|platform    |"${SystemPlatform}"|managed by|${FunctAcct}|additional parameters|-functAcctPwd ${FunctAcctPwd} -domainName ${DomainName} -NetBiosName ${NETBIOSDomainName} -NonPrivFuncFlag Y|
|Add account            |${ManagedAccount}                                                                          |on system   |${SystemName}   |with options|-UseSelfFlag Y                                                                                                                                                                |
|List Accounts by filter|-systemName ${SystemName} -AccountName ${ManagedAccount} -propsToList accountname,useSelfFl|contains    |${ManagedAccount}.*Y                                                                                                                                                                                        |
|List Accounts by filter|-systemName ${SystemName} -AccountName ${FunctAcct} -propsToList accountname,useSelfFl     |contains    |${FunctAcct}.*N                                                                                                                                                                                             |
|Delete System          |${SystemName}                                                                                                                                                                                                                                                                                                        |
