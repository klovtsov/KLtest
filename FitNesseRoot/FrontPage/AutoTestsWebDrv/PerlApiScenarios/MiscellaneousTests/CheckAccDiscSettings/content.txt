!define SystemName {${prefix}PerlSystem1}
!define TemplateName {${prefix}PerlSystem1_template}
!define AutoDiscoveryAccount {4perl}
!define ProfileName {${prefix}_PerlAPI}

!include -c <MiscellaneousTests.CheckAccDiscSettings.ScenarioLibrary
!include -c <MiscellaneousTests.ScenarioLibrary

!|script                                                                                                                                                                                                                                                                                                     |
|Open Browser and Login to TPAM                                                                                                                                                                                                                                                                              |
|Add System                      |${PerlAPIparams}||--SystemName=${SystemName};--PlatformName=Windows;--NetworkAddress=x.x.x.x                                                  ||successfull                                                                                                                |
|Add Account                     |${PerlAPIparams}||--SystemName=${SystemName};--AccountName=${AutoDiscoveryAccount}                                                            ||successfull                                                                                                                |
|Create Template                 |${SystemName}                                                                                                                                                                                                                                                              |
|Create Account Discovery Profile                                                                                                                                                                                                                                                                            |
|Update System                   |${PerlAPIparams}||--SystemName=${SystemName};--autoDiscoveryProfile=${ProfileName};--autoDiscoveryExcludeList=james;--autoDiscoveryTimeout=450||successfull                                                                                                                |
|List Systems                    |${PerlAPIparams}||--SystemName=${SystemName}                                                                                                  ||systemName: ${SystemName}.*autoDiscoveryProfile: ${ProfileName}.*autoDiscoveryExcludeList: james.*autoDiscoveryTimeout: 450|
|Delete System                   |${PerlAPIparams}||--SystemName=${SystemName}                                                                                                  ||successfull                                                                                                                |
|Hard-Delete System              |${SystemName}                                                                                                                                                                                                                                                              |
|pause                           |10000                                                                                                                                                                                                                                                                      |
|Delete Account Discovery Profile|${ProfileName}                                                                                                                                                                                                                                                             |
|Remove template                 |${TemplateName}                                                                                                                                                                                                                                                            |
|Close Browser                                                                                                                                                                                                                                                                                               |


