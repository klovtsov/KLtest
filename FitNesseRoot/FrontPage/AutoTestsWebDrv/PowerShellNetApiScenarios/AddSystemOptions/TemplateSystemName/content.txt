!include -c <AutoTestsWebDrv.PlatformsTesting.AixPlatform
!define ManagedAccount {${prefix}psAcnt}
!define TemplateName {${prefix}Temple}
!define newSystemName {${prefix}fromTemple}
!define sysDescription {Test system}
!define accDescription {Test account}
!define numApprvrs {3}
!define flagReqValue {Y}
!define flagAPIValue {Y}
!include -c <AutoTestsWebDrv.ScenarioLibrary
!include -c <AutoTestsWebDrv.AccountDiscovery.ScenarioLibrary
!include -c <PowerShellNetApiScenarios.ScenarioLibrary

!|script                                                                                                                                                                                                                                                                                                                 |
|Add system             |${SystemName}                                                                                                |with address   |${SystemAddress}                                      |platform    |${SystemPlatform}|managed by|${FunctAcct}|additional parameters|-RequireTicketForRequest ${flagReqValue} -RequireTicketForAPI ${flagAPIValue} -description "${sysDescription}"|
|Add account            |${ManagedAccount}                                                                                            |on system      |${SystemName}                                         |with options|-description "${accDescription}" -MinimumApprovers ${numApprvrs}                                                                                                              |
|Open                   |${TPAMURL}                                                                                                 |               |${TPAMAdmin}                       |            |${DefaultPwd}                                                                                                      |
|Choose System          |${SystemName}                                                                                                                                                                                                                                                                                   |
|Set Template                                                                                                                                                                                                                                                                                                            |
|Try to Add system      |${newSystemName}                                                                                           |with parameters|-templateSystemName ${TemplateName}|with result |System changes for ${newSystemName} saved successfully                                                             |
|List Systems by        |-systemName ${newSystemName}                                                                                 |output params  |SystemName,requireTicketForRequest,requireTicketForAPI|contain     |${newSystemName}.*${flagReqValue}.*${flagAPIValue}                                                                                                                            |
|List Accounts by filter|-systemName ${newSystemName} -AccountName ${ManagedAccount} -propsToList accountname,minApprovers,description|contains       |${ManagedAccount}.*3.*${accDescription}                                                                                                                                                                                                           |

!*> Clean Up
!|script                       |
|Delete System|${SystemName}   |
|Delete System|${newSystemName}|
|Choose System|${TemplateName} |
|Remove system|${TemplateName} |
|Logout Paradmin               |
*!
