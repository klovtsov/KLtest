!*> Includes
''System''
!include -c <AutoTestsWebDrv.PlatformsTesting.WindowsLocalHost
''Libraries''
!include -c <AutoTestsWebDrv.UsersTests.UserTypes.ScenarioLibrary
!include -c <PasswordProfiles.ScenarioLibrary
*!

''Failure - Lock''
!note Scheduled Check Password
!|script                                                                                                                                                                                                                                                    |
|Open                     |${TPAMURL}   ||${TPAMAdmin}                                                                                                                 ||${DefaultPwd}                                                                      |
|Add Account              |${CLIBatch}  ||--SystemName ${SystemName} --AccountName ${NotExist} --Password "WrongPWD" --PasswordCheckProfile ${CheckProfile7FailureLock}||successfully                                                                       |
|pause                    |${defaultPause}                                                                                                                                                                                                                  |
|Check Test Log           |${NotExist}  ||Failed - Host Unreachable                                                                                                                                                                                         |
|Check Failure Mail       |${MailServer}||${SystemEMail}                                                                                                               ||${SystemEMailPwd}||${FromMail}||${MailSubjectCheckFailure}||${MailBodyCheckFailure}|
|Check Account Lock Status|${NotExist}  ||true                                                                                                                                                                                                              |
|Check schedule disabled  |${NotExist}  ||false                                                                                                                                                                                                             |
|Management tab           |${NotExist}                                                                                                                                                                                                                      |
|check Failure Action     |${FailureLock}                                                                                                                                                                                                                   |
|Update Account           |${CLIBatch}  ||--SystemName ${SystemName} --AccountName ${NotExist} --LockFlag N                                                            ||successfully                                                                       |
|Check Account Lock Status|${NotExist}  ||false                                                                                                                                                                                                             |
|Delete Mails             |${SystemEMail}                                                                                                                                                                                                                   |

!note Manual Check Password
!|script                                                                                                                                                                                                                              |
|Check Password                  |${CLIBatch}  ||--SystemName ${SystemName} --AccountName ${NotExist}                                            ||The user name could not be found                                                   |
|Check Test Log                  |${NotExist}  ||Failed - Host Unreachable                                                                                                                                                            |
|pause                           |${defaultPause}                                                                                                                                                                                     |
|Check Account Lock Status       |${NotExist}  ||true                                                                                                                                                                                 |
|Check schedule disabled         |${NotExist}  ||false                                                                                                                                                                                |
|Check Failure Mail              |${MailServer}||${SystemEMail}                                                                                  ||${SystemEMailPwd}||${FromMail}||${MailSubjectCheckFailure}||${MailBodyCheckFailure}|
|Management tab                  |${NotExist}                                                                                                                                                                                         |
|Check Consecutive Check Failures|2                                                                                                                                                                                                   |
|Update Account                  |${CLIBatch}  ||--SystemName ${SystemName} --AccountName ${NotExist} --PasswordCheckProfile "!NULL" --AutoFlag N||successfully                                                                       |
|Delete Account                  |${CLIBatch}  ||--SystemName ${SystemName}  --AccountName ${NotExist}                                           ||successfully                                                                       |
|Delete Mails                    |${SystemEMail}                                                                                                                                                                                      |
|stop                                                                                                                                                                                                                                 |
