!*> Includes
''System''
!include -c <AutoTestsWebDrv.PlatformsTesting.WindowsLocalHost
''Libraries''
!include -c <AutoTestsWebDrv.UsersTests.UserTypes.ScenarioLibrary
!include -c <PasswordProfiles.ScenarioLibrary
*!

''Failure - Disable check schedule''
!note Scheduled Check Password
!|script                                                                                                                                                                                                                                                                  |
|Open                                |${TPAMURL}   ||${TPAMAdmin}                                                                                                                    ||${DefaultPwd}                                                                      |
|Add Account                         |${CLIBatch}  ||--SystemName ${SystemName} --AccountName ${NotExist} --Password "WrongPWD" --PasswordCheckProfile ${CheckProfile6FailureDisable}||successfully                                                                       |
|pause                               |100000                                                                                                                                                                                                                              |
|Check Test Log                      |${NotExist}  ||Failed - Host Unreachable                                                                                                                                                                                            |
|Check Failure Mail                  |${MailServer}||${SystemEMail}                                                                                                                  ||${SystemEMailPwd}||${FromMail}||${MailSubjectCheckFailure}||${MailBodyCheckFailure}|
|Check schedule disabled             |${NotExist}  ||true                                                                                                                                                                                                                 |
|Check Account Lock Status           |${NotExist}  ||false                                                                                                                                                                                                                |
|Management tab                      |${NotExist}                                                                                                                                                                                                                         |
|Check Consecutive Check Failures    |1                                                                                                                                                                                                                                   |
|check Failure Action                |${FailureDisable}                                                                                                                                                                                                                   |
|Turn off Disable Check Schedule Flag|${NotExist}                                                                                                                                                                                                                         |
|Check schedule disabled             |${NotExist}  ||false                                                                                                                                                                                                                |
|Delete Mails                        |${SystemEMail}                                                                                                                                                                                                                      |


!note Manual Check Password
!|script                                                                                                                                                                                                                              |
|Check Password                  |${CLIBatch}  ||--SystemName ${SystemName} --AccountName ${NotExist}                                            ||The user name could not be found                                                   |
|Check Test Log                  |${NotExist}  ||Failed - Host Unreachable                                                                                                                                                            |
|pause                           |100000                                                                                                                                                                                              |
|Check schedule disabled         |${NotExist}  ||true                                                                                                                                                                                 |
|Check Account Lock Status       |${NotExist}  ||false                                                                                                                                                                                |
|Check Failure Mail              |${MailServer}||${SystemEMail}                                                                                  ||${SystemEMailPwd}||${FromMail}||${MailSubjectCheckFailure}||${MailBodyCheckFailure}|
|Management tab                  |${NotExist}                                                                                                                                                                                         |
|Check Consecutive Check Failures|2                                                                                                                                                                                                   |
|Update Account                  |${CLIBatch}  ||--SystemName ${SystemName} --AccountName ${NotExist} --PasswordCheckProfile "!NULL" --AutoFlag N||successfully                                                                       |
|Delete Account                  |${CLIBatch}  ||--SystemName ${SystemName}  --AccountName ${NotExist}                                           ||successfully                                                                       |
|Delete Mails                    |${SystemEMail}                                                                                                                                                                                      |
|stop                                                                                                                                                                                                                                 |
