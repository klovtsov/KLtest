!|scenario|Create Account on System                               |
|SSH      |useradd.script;;${ManagedAccount};;${ManagedAccountPwd}|

!|scenario|Change Account Password on System |NewPwd|
|SSH      |passwd.script;;${ManagedAccount};;@NewPwd|

!|scenario         |Create Password Rule For UnixWare|ruleName                    |
|Login             |${TPAMAdminURL}                  ||${TPAMMaster}||${MasterPwd}|
|pause             |10000                                                         |
|clickAndWait      |link=Password Rules                                           |
|click             |id=NewRuleButton                                              |
|type;             |id=PwdRuleName                   |@ruleName                   |
|type;             |id=PwdRuleDesc                   |Rule for UnixWare passwords |
|type;             |id=MaxChars                      |8                           |
|type;             |id=MinChars                      |7                           |
|click             |id=ReqFirst                                                   |
|select;           |id=ReqFirst                      |label=Alpha Characters Only |
|click             |id=ReqUpper                                                   |
|select;           |id=ReqUpper                      |label=Require at least 2    |
|click             |id=ReqLower                                                   |
|select;           |id=ReqLower                      |label=Require at least 2    |
|click             |id=ReqNum                                                     |
|select;           |id=ReqNum                        |label=Require at least 1    |
|click             |id=ReqNonAN                                                   |
|select;           |id=ReqNonAN                      |label=Not Permitted         |
|click             |id=SubmitChangesButton                                        |
|waitForTextPresent|Password Rule changes saved successfully                      |

!|scenario        |Delete Password Rule|ruleName                                |
|$res=            |GroovyWebDriver     |DeletePasswordRule;${TPAMHost};@ruleName|
|Verify_Contain_OR|$res;;Rule deleted                                           |

!|scenario         |Remove system       |sysName   |
|Choose system     |@sysName                       |
|click             |id=Details          |          |
|type;             |id=NetworkAddress   |@sysName  |
|click             |id=bt_Save          |          |
|pause             |1000                           |
|click             |id=bt_Clear         |          |
|waitForTextPresent|*The results from the clearing*|
|click             |id=bt_Del           |          |
|getConfirmation                                   |
|waitForTextPresent|has been successfully deleted  |


!|scenario            |Hard-Delete System                  |systemName |
|clickAndWait         |link=Deleted Systems                            |
|type;                |id=SystemNm                         |@systemName|
|click                |id=Listing                          |           |
|waitForElementPresent|//td[contains(text(),'@systemName')]|           |
|mouseDown            |//td[contains(text(),'@systemName')]|           |
|click                |//td[contains(text(),'@systemName')]|           |
|click                |id=HardDeleteButton                 |           |
|getConfirmation                                                       |
|waitForTextPresent   |has been successfully deleted                   |
|pause                |1000                                            |
|Logout                                                                |

!| scenario                       |Managed System                           |
|Create Account on System                                                   |
|Create Password Rule For UnixWare|${UnixWareRuleName}                      |
|Login                            |${TPAMURL}  ||${TPAMAdmin}||${DefaultPwd}|
|Add system                                                                 |
|Set Connection Tab                                                         |
|Test System                      |${TestSystemSuccessful}                  |
|Choose Account                   |${FunctAcct}                             |
|Set password                     |${FunctAcct}||${FunctAcctWrongPwd}       |
|Test System                      |${TestSystemFailed}                      |
|Choose Account                   |${FunctAcct}                             |
|Check Password                   |${CheckPasswordFailed}                   |

!|scenario            |Add system                                 |
|pause                |5000                                       |
|waitForElementPresent|link=Add System                            |
|clickAndWait         |link=Add System                            |
|waitForElementPresent|id=SystemName                              |
|type;                |id=SystemName    |${SystemName}            |
|type;                |id=NetworkAddress|${SystemAddress}         |
|select;              |id=PlatformID    |label=${SystemPlatform}  |
|select;              |id=PwdRuleID     |label=${UnixWareRuleName}|


!|scenario         |Cancel Password Request                                                                                                 |
|$res=             |GroovyWebDriver|ppm_cancelPasswordRequest;${browser};${TPAMHost};${Requestor};${UserPwd};${SystemName};${ManagedAccount}|
|Verify_Contain_OR |$res;;canceled                                                                                                          |
|Verify_Contain_NOT|$res;;Exception                                                                                                         |


!| scenario              |Delete All         |
|Cancel Password Request                     |
|Remove account          |${ManagedAccount}  |
|Remove system           |${SystemName}      |
|Hard-Delete System      |${SystemName}      |
|Delete Account on System|${ManagedAccount}  |
|Delete Password Rule    |${UnixWareRuleName}|

