!| scenario                  |Managed System                                                                    |
|Create Account on System                                                                                       |
|Open                        |${TPAMURL}       |            |${TPAMAdmin}        |        |${DefaultPwd}        |
|Add system                  |${HostSystemName}|with address|${HostSystemAddress}|platform|${HostSystemPlatform}|
|Add system                  |${SystemName}    |with address|${SystemAddress}    |platform|${SystemPlatform}    |
|pause                       |10000                                                                             |
|Set Local Functional Account|${HostSystemName}\${FunctAcct}                                                    |
|Test System                 |${TestSystemSuccessful}                                                           |
|Set password                |${FunctAcct}     |            |${FunctAcctWrongPwd}                               |
|Test System                 |${TestSystemFailed}                                                               |
|Check Password              |${FunctAcct}     |            |${CheckPasswordFailed}                             |


!|scenario            |Set Local Functional Account |account  |
|Choose System                                                |
|click                |id=Details                             |
|waitForElementPresent|id=Connection                          |
|click                |id=Connection                          |
|waitForElementPresent|id=cb_funcacct_local                   |
|click                |id=cb_funcacct_local                   |
|pause                |5000                                   |
|type;                |id=FuncAcctLocal             |@account |
|pause                |5000                                   |
|click                |id=bt_Save                   |         |
|waitForTextPresent   |System changes for * saved successfully|


!|scenario        |Add System|sysname                         |with address                         |systemAddress                        |platform                        |platform                        |                        |
|$res=            |CLI       |${CLIBatch} AddSystem --SystemName @sysname --NetworkAddress @systemAddress --PlatformName \"@platform\" --FunctionalAccount ${FunctAcct} --FuncAcctCred \"${FunctAcctPwd}\" --Timeout ${SystemTimeout}|
|Verify_Contain_OR|$res;;successful                                                                                                                                                                                                  |

!| scenario       |Set Password|acc                            |                            |passwd                           |
|$res=            |CLI         |${CLIBatch} UpdateAccount --System ${HostSystemName} --AccountName @acc --Password \"@passwd\"|
|Verify_Contain_OR|$res;;successful                                                                                           |

!|scenario    |Create Account on System                                                                                                              |
|accountAction|MSSQLwinAuth;;create;;${HostSystemAddress};;${FunctAcct};;${FunctAcctPwd};;${SqlInstanceName};;${ManagedAccount};;${ManagedAccountPwd}|

!|scenario    |Change Account Password on System                                          |NewPwd                                         |
|accountAction|MSSQLwinAuth;;password;;${HostSystemAddress};;${FunctAcct};;${FunctAcctPwd};;${SqlInstanceName};;${ManagedAccount};;@NewPwd|

!|scenario    |Delete Account on System                                                                                        |
|accountAction|MSSQLwinAuth;;delete;;${HostSystemAddress};;${FunctAcct};;${FunctAcctPwd};;${SqlInstanceName};;${ManagedAccount}|

!| scenario              |Delete All                 |
|Revoke User Permissions |${CLI_user_1}              |
|Revoke User Permissions |${CLI_user_2}              |
|pause                   |${ApplyNewPoliciesInterval}|
|Remove account          |${ManagedAccount}          |
|Remove system           |${SystemName}              |
|Remove system           |${HostSystemName}          |
|Delete Account on System|${ManagedAccount}          |
