!* Test Description
If an account is expired, TPAM will reset the password.
*!
!include <AutoTestsWebDrv.CliScenarios.WindowsActiveDirTwelve
!define dcName {kldozen}

!include -c  <PowerShellNetApiScenarios.ScenarioLibrary

!*> Create environment
!|script                                                                                                                                                                                                                                  |
|Create Account on System                                                                                                                                                                                                                 |
|Make account expired                                                                                                                                                                                                                     |
|Add system     |${SystemName}    |with address|${SystemAddress} |platform    |"${SystemPlatform}"|managed by|${FunctAcct}|additional parameters|-functAcctPwd ${FunctAcctPwd} -domainName ${DomainName} -NetBiosName ${NETBIOSDomainName}|
|Test System    |${TestSystemSuccessful}                                                                                                                                                                                                  |
|Add account    |${ManagedAccount}|on system   |${SystemName}    |with options|-Password ${ManagedAccountPwdNew} -MinimumApprovers 0                                                                                                      |
|Set Permissions|"PPM Requestor"  |on  account |${ManagedAccount}|for user    |${API_user_1}                                                                                                                                              |
*!
!|script                                  |
|Reset Password|${ResetPasswordSuccessful}|
|Make account not expired                 |
|Request Pwd by|${API_user_1}             |
|Get Login                                |

!*> Remove All
!|script                                   |
|Delete System           |${SystemName}    |
|Delete Account on System|${ManagedAccount}|
*!
