!|scenario               |Prepare Account    |AccountName|                                                                                                                                                   |SystemName|              |SystemAddress                               |
|Add Account             |${CLIBatch}        |           |--SystemName @SystemName --AccountName @AccountName --AutoFlag N --MinimumApprovers 0                                                              |          |successfully                                               |
|Update PSM Account      |${CLIBatch}        |           |--System @SystemName --Account @AccountName --EnableFlag Y --MinApprovers 0 --PasswordMethod \"Not Stored\" --ProxyType \"SSH - Interactive Login\"|          |successfully                                               |
|Create Account on System|${SystemPlatformAD}|           |${SystemAddressAD}                                                                                                                                 |          |${FunctAcctAD}||${FunctAcctPwdAD}||${UserName}||${UserPwd}||
|Enable Qas User                                                                                                                                                                                                                                                                    |

!|scenario        |Create logon script                                                                                         |
|$res=            |RunBatchGetOutput|logon;create;${SystemAddress};${FunctAcct};${FunctAcctPwd};${UserName};${OSType};${prefix}|
|Verify_Contain_OR|$res;;touch.*${UserName}.*successfully                                                                      |


!|scenario        |Check logon script                                                                               |
|$res=            |RunBatchGetOutput|logon;check;${SystemAddress};${FunctAcct};${FunctAcctPwd};${OSType};${UserName}|
|Verify_Contain_OR|$res;;successfully                                                                               |

!|scenario|Delete logon script                                                                        |
|runBatch |logon;delete;${SystemAddress};${FunctAcct};${FunctAcctPwd};${UserName};${OSType};${prefix}||

!|scenario         |Connect        |userName                          |                          |userPwd                          |                          |accountName                          |                          |requestID                         |
|stop                                                                                                                                                                                                                                                             |
|$res=             |GroovyWebDriver|PSMSmokeTest;TPAMaddress=${TPAMHost};UserName=@userName;UserPassword=@userPwd;AccountName=@accountName;RequestID=@requestID;Browser=${Browser};OSType=${OSType};Image=${Image};qasPassword=${UserPwd};blackImage=${blackImage}|
|Verify_Contain_NOT|$res;;SClickMultiple failed                                                                                                                                                                                                                   |
|Verify_Contain_OR |$res;;Finished                                                                                                                                                                                                                                |

!|scenario    |Create Account on System|SystemPlatform||SystemAddress||FunctAcct||PwdFunctAcct||ManagedAccount||PwdManagedAccount|
|accountAction|@SystemPlatform;;create;;@SystemAddress;;@FunctAcct;;@PwdFunctAcct;;@ManagedAccount;;@PwdManagedAccount           |

!|scenario    |Delete Account on System|SystemPlatform||SystemAddress||FunctAcct||PwdFunctAcct||ManagedAccount|
|accountAction|@SystemPlatform;;delete;;@SystemAddress;;@FunctAcct;;@PwdFunctAcct;;@ManagedAccount            |


!|scenario               |Clear Objects                                                                          |
|Remove system           |${SystemName}                                                                          |
|Delete logon script                                                                                             |
|Delete Account on System|${SystemPlatformAD}||${SystemAddressAD}||${FunctAcctAD}||${FunctAcctPwdAD}||${UserName}|
|Remove User             |${Requestor}                                                                           |
|Login                   |${TPAMURL}         ||${TPAMAdmin}      ||${DefaultPwd}                                 |
|Hard-Delete System      |${SystemName}                                                                          |

!|scenario        |Enable Qas User                                                                                   |
|$res=            |PowerShellScript|EnableQASUser.ps1 ${SystemAddressAD} ${FunctAcctAD} ${FunctAcctPwdAD} ${UserName}|
|Verify_Contain_OR|$res;;UnixEnabled.*True                                                                           |

!|scenario            |Add system                                                               |systemName||systemAddress||systemPlatform||functAcct||functionalAccountPassword|
|pause                |1000                                                                                                                                                     |
|clickOnLink          |link=Add System                                                                                                                                          |
|waitForElementPresent|id=SystemName                                                                                                                                            |
|type;                |id=SystemName                                                            |@systemName                                                                    |
|type;                |id=NetworkAddress                                                        |@systemAddress                                                                 |
|select;              |id=PlatformID                                                            |label=@systemPlatform                                                          |
|pause                |1000                                                                                                                                                     |
|click                |id=Connection                                                            |                                                                               |
|type;                |id=PARFuncAcct                                                           |@functAcct                                                                     |
|type;                |id=pword                                                                 |@functionalAccountPassword                                                     |
|type;                |id=ConfPword                                                             |@functionalAccountPassword                                                     |
|click                |id=bt_Save                                                               |                                                                               |
|waitForTextPresent   |System changes for * saved successfully                                                                                                                  |
|Choose system                                                                                                                                                                  |
|pause                |2000                                                                                                                                                     |
|click                |id=Affinity                                                                                                                                              |
|pause                |2000                                                                                                                                                     |
|click                |id=rbEGPAffinitySelected                                                 |                                                                               |
|type;                |xpath=//table[@id = 'tblEGPDPAAffinity']/*/tr[td = 'LocalServer']/*/input|1                                                                              |
|pause                |2000                                                                                                                                                     |
|click                |id=bt_Save                                                               |                                                                               |
|waitForTextPresent   |System changes for * saved successfully                                                                                                                  |

