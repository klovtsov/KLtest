!define ManagedAccount {${prefix}psAcnt}
!define checkFlagValue {Y}
!include -c <AutomatedTesting.ScenarioLibrary
!include -c <PowerShellNetApiScenarios.ScenarioLibrary

!3 Reset Flag value is Y (by default)
!|script                                                                                                                                                                                                                                                                                |
|Create Account on System                                                                                                                                                                                                                                                               |
|Add system              |${SystemName}                                                                                    |with address |${SystemAddress}          |platform|${SystemPlatform}|managed by|${FunctAcct}|additional parameters|-functAcctPwd ${FunctAcctPwd} -ResetFlag N|
|Add account            |${ManagedAccount}                                                                          |on system   |${SystemName}   |with options|-password ${ManagedAccountPwdNew}  -ResetFlag Y                                                             |
|List Accounts by filter|-systemName ${SystemName} -AccountName ${ManagedAccount} -propsToList accountname,checkFl,resetFl|contains    |${ManagedAccount}.*Y.*Y                                                                                            |
|Check Password          |${CheckPasswordNotMatch}                                                                                                                                                                                                                                      |
|pause                   |${RestoreFunctAcctPasswordTimeout}                                                                                                                                                                                                                            |
|Check Password          |${CheckPasswordSuccessful}                                                                                                                                                                                                                                    |
|Delete System           |${SystemName}                                                                                                                                                                                                                                                 |
|Delete Account on System|${ManagedAccount}                                                                                                                                                                                                                                             |

!3 Reset Flag value is N

!|script                                                                                                                                                                                                                                                                                |
|Create Account on System                                                                                                                                                                                                                                                               |
|Add system              |${SystemName}                                                                                    |with address |${SystemAddress}          |platform|${SystemPlatform}|managed by|${FunctAcct}|additional parameters|-functAcctPwd ${FunctAcctPwd} -ResetFlag Y|
|Add account            |${ManagedAccount}                                                                          |on system   |${SystemName}   |with options|-password ${ManagedAccountPwdNew}  -ResetFlag N                                                             |
|List Accounts by filter |-systemName ${SystemName} -AccountName ${ManagedAccount} -propsToList accountname,checkFl,resetFl|contains     |${ManagedAccount}.*Y.*N                                                                                                                       |
|Check Password          |${CheckPasswordNotMatch}                                                                                                                                                                                                                                      |
|pause                   |${RestoreFunctAcctPasswordTimeout}                                                                                                                                                                                                                            |
|Check Password          |${CheckPasswordNotMatch}                                                                                                                                                                                                                                      |
|Delete System           |${SystemName}                                                                                                                                                                                                                                                 |
|Delete Account on System|${ManagedAccount}                                                                                                                                                                                                                                             |
