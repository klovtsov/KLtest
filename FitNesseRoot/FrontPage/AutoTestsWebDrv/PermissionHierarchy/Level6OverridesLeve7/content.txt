!* Test description
A user has permissions for a collection of accounts and for a system.
Permission on system shouldn't override permissions on account collection
*!

!define CollectionName {${prefix}AccntColtn}

!define OverlappedPolicy {\"PPM Requestor\"}
!define lowLevelType {system}
!define lowLevelObjectName {${SystemName}}
!define lowLevelSubjectType {group}
!define lowLevelSubjectName {${GroupName}}

!define OverlappingPolicy {\"PPM Approver\"}
!define upLevelType {collection}
!define upLevelObjectName {${CollectionName}}
!define upLevelSubjectType {group}
!define upLevelSubjectName {${GroupName}}

!*> Include section
!include -c <AutoTestsWebDrv.ScenarioLibrary
!include -c <AutoTestsWebDrv.EmailScenarios.ScenarioLibrary
!include -c <AutoTestsWebDrv.CliScenarios.ScenarioLibrary
!include -c ScenarioLibrary
*!
!*> create Environment
!|script                                                                                          |
|Add Group                |${GroupName}                                                           |
|Add User To Group        |${CLI_user_2}    |             |${GroupName}                           |
|Add System                                                                                       |
|Add Collection           |${CollectionName}                                                      |
|Add account              |${ManagedAccount}|with password|${ManagedAccountPwd}||${NotFailed}     |
|Add Account To Collection|${SystemName}    |             |${ManagedAccount}   ||${CollectionName}|
*!
!|script  |
|Main test|

!*> Clean environment
!|script                            |
|Remove account   |${ManagedAccount}|
|Remove system    |${SystemName}    |
|Delete Collection|${CollectionName}|
|Delete Group     |${GroupName}     |
*!
